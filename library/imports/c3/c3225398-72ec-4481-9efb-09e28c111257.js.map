{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Script\\Hall/assets\\Script\\Hall\\RankNode.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\Hall","sourcesContent":["import ListViewCommon from \"../Common/ListViewCommon\";\nimport RankItem from \"./RankItem\";\nimport { G_Language } from \"../Language/Language\";\nimport { G_HttpHelper } from \"../Net/HttpHelper\";\nimport { G_UserControl } from \"../Controller/UserControl\";\nimport { G_UiForms } from \"../Tool/UiForms\";\nimport { uiEventModules } from \"../Config/uiEvent\";\nimport { RequestEnum } from \"../Config/RequestConfig\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class RankNode extends cc.Component {\n\n    @property(cc.Label)\n    titleLabel: cc.Label = null;\n    @property(cc.Label)\n    myTextLabel: cc.Label = null;   \n\n    @property(cc.Node)\n    viewNode:cc.Node = null;\n    @property(cc.Node)\n    viewOne: cc.Node = null;\n    @property(cc.Node)\n    viewTwo: cc.Node = null;    \n    @property(cc.Node)\n    contain:cc.Node =null;\n    @property(cc.Node)\n    tabSelectOne:cc.Node = null;\n    @property(cc.Node)\n    tabSelectTwo:cc.Node = null;\n\n    @property(cc.Node)\n    btnSprite1:cc.Node = null;\n    @property(cc.Node)\n    btnSprite2:cc.Node = null;\n    @property(cc.Node)\n    btnEffect:cc.Node = null;\n\n\n    @property(cc.Node)\n    tabBtn1:cc.Node = null;\n    @property(cc.Node)\n    tabBtn2:cc.Node = null;\n\n    private listOne = [];\n    private listTwo = [];\n\n    //是否展开\n    private isOpen = false;\n\n    private index = 1;    //1.盈利榜  2.富豪榜\n\n    private myRankOne = 0;  //我的盈利榜rank\n    private myRankTwo = 0;  //我的富豪榜rank\n\n    onEnable () {\n        /*\n        this.scheduleOnce(()=>{\n            this.showInfo();\n        },3);\n        */\n    }\n\n    onShowClick(event){\n        /*\n        if(!G_UserControl.isLogin()){\n            G_UiForms.hint(G_Language.get(\"PleaseLogInFirst\"))\n            G_UiForms.show(uiEventModules.landingNode);\n            return;\n        }*/\n\n        if(this.isOpen)\n        {     \n           this.isOpen = false;\n           let action = cc.moveTo(0.4,cc.v2(-400,-7));\n           this.contain.runAction(action);\n           this.scheduleOnce(function(){\n               this.btnEffect.active = false;\n               this.btnEffect.active = true;\n           }.bind(this),0.4);   \n            this.scheduleOnce(function(){\n                this.btnSprite1.active = true;\n                this.btnSprite2.active = false;    \n            }.bind(this),0.8); \n        }else{\n            this.showInfo()\n            this.isOpen = true;\n            let action = cc.moveTo(0.4,cc.v2(0,-7));\n            this.contain.runAction(action);\n            this.tabBtnEffect();\n            this.viewNodeEffect();\n\n            this.scheduleOnce(function(){\n                this.btnEffect.active = false;\n                this.btnEffect.active = true;\n            }.bind(this),0.4);\n            this.scheduleOnce(function(){\n                this.btnSprite1.active = false;\n                this.btnSprite2.active = true;    \n            }.bind(this),0.8);\n        }\n    }\n\n    tabBtnEffect()\n    {\n        let scale1 = cc.scaleTo(0.1,0.9,0.9);\n        let scale2 = cc.scaleTo(0.1,1.1,1.1);\n        let scale3 = cc.scaleTo(0.1,1,1);\n        this.tabBtn1.runAction(cc.sequence(cc.delayTime(0.35),scale1,scale2,scale3));\n        let scale4 = cc.scaleTo(0.1,0.9,0.9);\n        let scale5 = cc.scaleTo(0.1,1.1,1.1);\n        let scale6 = cc.scaleTo(0.1,1,1);\n        this.tabBtn2.runAction(cc.sequence(cc.delayTime(0.5),scale4,scale5,scale6));\n    }\n\n    viewNodeEffect()\n    {\n        let alpha1 = cc.fadeOut(0);\n        let alpha2 = cc.fadeTo(0.5,255);\n        this.viewNode.runAction(cc.sequence(alpha1,cc.delayTime(0.4),alpha2));\n    }\n\n    showInfo()\n    {\n        if(this.index== 1)\n        {\n            this.viewOne.active = true;\n            this.viewTwo.active = false;\n            this.tabSelectOne.active = true;\n            this.tabSelectTwo.active = false;\n            this.titleLabel.string = G_Language.get(\"rank_title1\");\n            if(this.listOne.length <= 0){\n                G_HttpHelper.httpPost(RequestEnum.Profit,null,function(data){\n                    \n                    if(data.status)\n                    {\n                        console.log(data.data.length)\n                        this.viewOne.getComponent(ListViewCommon).init(data.data.length,35,function(index,itemPrefab){\n                            let itemTs = itemPrefab.getComponent(RankItem);\n                            this.listOne[index] = itemTs;\n                            itemTs.init(index+1,data.data[index]);\n                            //console.log(\"data.data.guid   \"+data.data[index] + \"  \"+ G_UserControl.getUser().uid)\n                            if(data.data[index].guid == G_UserControl.getUser().uid)\n                            {\n                                this.myRankOne = index + 1;\n                                if( this.myRankOne <= 100)\n                                {\n                                    this.myTextLabel.string = \"你当前排名为第\"+ this.myRankOne+\"名\";\n                                }else\n                                {\n                                    this.myTextLabel.string = \"未上榜\";\n                                }\n                            }\n                        }.bind(this));\n                    }\n                }.bind(this));\n            }else\n            {\n                if( this.myRankOne <= 100)\n                {\n                    this.myTextLabel.string = \"你当前排名为第\"+ this.myRankOne+\"名\";\n                }else\n                {\n                    this.myTextLabel.string = \"未上榜\";\n                }\n            }\n        }else{\n           \n            this.viewOne.active = false;\n            this.viewTwo.active = true;\n            this.tabSelectOne.active = false;\n            this.tabSelectTwo.active = true;\n            this.titleLabel.string = G_Language.get(\"rank_title2\");\n            if(this.listTwo.length <= 0){\n                G_HttpHelper.httpGet(RequestEnum.Rich,function(data){\n                    if(data.status)\n                    {\n                        this.viewTwo.getComponent(ListViewCommon).init(data.data.length,35,function(index,itemPrefab){\n                            let itemTs = itemPrefab.getComponent(RankItem);\n                            this.listTwo[index] = itemTs;\n                            itemTs.init(index+1,data.data[index]);\n                            if(data.data[index].guid == G_UserControl.getUser().uid)\n                            {\n                                this.myRankTwo = index + 1;\n                                if(this.myRankTwo <= 100)\n                                {\n                                    this.myTextLabel.string = \"你当前排名为第\"+this.myRankTwo+\"名\";\n                                }else\n                                {\n                                    this.myTextLabel.string = \"未上榜\";\n                                }\n                            }\n                        }.bind(this));\n                    }\n                }.bind(this));\n            }else\n            {\n                if(this.myRankTwo <= 100)\n                {\n                    this.myTextLabel.string = \"你当前排名为第\"+this.myRankTwo+\"名\";\n                }else\n                {\n                    this.myTextLabel.string = \"未上榜\";\n                }\n            }           \n        }     \n    }\n\n    tabCLickOne(target)\n    {\n        this.index = 1;\n        this.showInfo()\n    }\n    tabClickTwo()\n    {\n        this.index = 2;\n        this.showInfo()\n    }\n\n\n    // update (dt) {}\n}\n"]}