{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\Hall\\Withdraw/assets\\Script\\Hall\\Withdraw\\DetailPanel.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Hall\\Withdraw","sourcesContent":["import { G_Language } from '../../Language/Language';\nimport List from '../../Common/List';\nimport { G_UserControl } from '../../Controller/UserControl';\nimport { G_Utils } from '../../Tool/Utils';\nimport { G_PayControl } from '../../Controller/PayControl';\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class RecordPanel extends cc.Component {\n\n\n    @property(List)\n    list : List = null;\n    @property(cc.Node)\n    typeList : cc.Node = null;\n    @property(cc.Node)\n    btnChaXun : cc.Node = null;\n\n    // private classMenu = null;\n    private _typeMenu = null;\n    private _updateQueryFlag = false;\n\n    private curList = null;\n    private curBeginTimeDate = null;\n    private curEndTimeDate = null;\n\n    private dateType = 1;\n\n    onLoad () {\n       // let btnChaXun = this.node.getChildByName(\"btnChaXun\")\n        this.btnChaXun.on(cc.Node.EventType.TOUCH_END, this.onChaXun.bind(this));\n        //this.list.numItems = 2;\n        if(this.typeList){\n            this._typeMenu = this.typeList.getComponent(\"MyPulldownMenu\")\n           // G_PayControl.getPayConfig().getAccountTypeValueList()\n            this._typeMenu.menuData =  G_PayControl.getPayConfig().getAccountTypeValueList()\n            var _length = G_PayControl.getPayConfig().getAccountTypeValueList().length;\n            if(_length >=8)\n            {\n                this._typeMenu.list.node.height = 37 * 8;\n            }else\n            {\n                this._typeMenu.list.node.height = _length > 0 ? (37*_length):37;\n            }\n            var selectedId = this._typeMenu.selectResult.selectedId;\n            var selectedText = this._typeMenu.selectResult.text;\n            console.log(\"选择了什么》》\",selectedId,selectedText)\n        }\n\n    }\n\n    onEnable()\n    {\n        G_PayControl.requesAccountRecord(function(ret){         \n            this.showInfo();\n        }.bind(this));\n    }\n\n    onChaXun(){\n        this._updateQueryFlag = true;\n        this.list.content.removeAllChildren();\n        console.log(\"this._typeMenu.selectResult.selectedId   \",this._typeMenu.selectResult.selectedId);\n        \n        var _type = G_PayControl.getPayConfig().getCurAccountSign(this._typeMenu.selectResult.selectedId);\n        this.curList = G_PayControl.getPayConfig().getRecordListInfo(_type,this.curBeginTimeDate,this.curEndTimeDate);\n        this.list.numItems = this.curList.length;\n    }\n\n    showInfo(){\n        this.getTimeDate();   \n        this.onChaXun();  \n    }\n\n    onToggleClick(event){\n        console.log(\"event.name:\",event.target._localZOrder)\n        this.dateType =  event.target._localZOrder;    //1.全部 2.昨日 3.今日 4.上周 5.上月\n        this.getTimeDate();        \n    }\n\n    getTimeDate()\n    {\n        G_Utils.getTimeDate(this.dateType,function(begin,end){\n            this.curBeginTimeDate = begin;\n            this.curEndTimeDate = end;\n        }.bind(this));\n    }\n\n    /*\n    getTimeDate()\n    {\n        var now = new Date(); //当前日期\n        var nowDayOfWeek = now.getDay()-1; //今天本周的第几天\n        var nowDay = now.getDate(); //当前日\n        var nowMonth = now.getMonth(); //当前月\n        var nowYear = now.getFullYear(); //当前年\n        nowYear += (nowYear < 2000) ? 1900 : 0;\n        var lastMonthDate = new Date(); //上月日期\n        lastMonthDate.setDate(1);\n        lastMonthDate.setMonth(lastMonthDate.getMonth() - 1);\n        var lastYear = lastMonthDate.getFullYear();       \n        var lastMonth = lastMonthDate.getMonth();\n        let begin = null;\n        let end = null;\n        if(this.dateType == 1)\n        {\n            begin =  new Date(nowYear-3, lastMonth, 1);\n            end = new Date();\n            this.curBeginTimeDate = begin.getTime();\n            this.curEndTimeDate = end.getTime();\n        }\n       else if(this.dateType == 2)  //2.昨日\n       {\n            begin =  new Date(nowYear, nowMonth, nowDay-1);      \n            end = new Date(nowYear, nowMonth, nowDay);\n            this.curBeginTimeDate = begin.getTime();\n            this.curEndTimeDate = end.getTime();\n       }\n       else if(this.dateType == 3)  //3.今日\n       {\n            begin = new Date(nowYear, nowMonth, nowDay);      \n            end = new Date();\n            this.curBeginTimeDate = begin.getTime();\n            this.curEndTimeDate = end.getTime();\n       } \n       else if(this.dateType == 4)  //4.上周\n       {\n            begin =  new Date(nowYear, nowMonth, nowDay - nowDayOfWeek - 7);      \n            end = new Date(nowYear, nowMonth, nowDay - nowDayOfWeek - 1);\n            this.curBeginTimeDate = begin.getTime();\n            this.curEndTimeDate = end.getTime();\n\n       }else if(this.dateType == 5)  //5.上月\n       {\n           if(lastMonth==11){\n               begin = new Date(nowYear-1, lastMonth, 1);\n               end = new Date(nowYear-1, lastMonth, this.getMonthDays(nowYear,lastMonth));\n            }else{\n                begin = new Date(nowYear, lastMonth, 1);\n                end = new Date(nowYear-1, lastMonth, this.getMonthDays(nowYear,lastMonth));\n            }    \n            this.curBeginTimeDate = begin.getTime();\n            this.curEndTimeDate = end.getTime();\n       } \n    //    console.log(\"type \",this.dateType);\n    //    console.log(\"begin \",begin);\n    //    console.log(\"end \",end);\n    }\n\n    //获得某月的天数\n    getMonthDays(nowYear,myMonth) {\n        let monthStartDate = new Date(nowYear, myMonth, 1);\n        let monthEndDate = new Date(nowYear, myMonth + 1, 1);\n        let days = (monthEndDate - monthStartDate) / (1000 * 60 * 60 * 24);\n        return days;\n    }\n    */\n\n    onListRender(item: cc.Node, idx: number) {\n        //console.log(\"item   \",this.curList.length);\n        //console.log(\"idx   \",idx);\n        item.getChildByName(\"sprDiSe\").active = idx % 2 == 0;\n        if(this.curList.length > idx)\n        {\n            let cur = this.curList[idx]\n            console.log(\"cur   \",cur);\n            let _color = \"\";\n            let labStr = \"\";\n            if(cur.in_out == 2)  //减少\n            {\n                _color = \"37CC6E\"\n                labStr = \"-\"+parseFloat(cur.amount).toFixed(2);\n            }else\n            {\n                _color = \"DF0F39\"\n                labStr = \"+\"+parseFloat(cur.amount).toFixed(2);\n            }\n            item.getChildByName(\"label_0\").getComponent(cc.RichText).string = \"<color =#\" +_color +\">\"+labStr +\"</color>\"\n            item.getChildByName(\"label_1\").getComponent(cc.Label).string = G_PayControl.getPayConfig().getCurAccoutSignValue(cur.type_sign);\n            item.getChildByName(\"label_2\").getComponent(cc.Label).string = parseInt(cur.balance).toFixed(2);\n            item.getChildByName(\"label_3\").getComponent(cc.Label).string = cur.created_at\n        }\n    }\n\n    onRequestData(item: cc.Node, idx: number){\n        // if (this.list.length >= 99){\n        //     return;\n        // }\n        // if(this._updateQueryFlag){\n        //     this._updateQueryFlag = false;\n        //     return;\n        // }\n        // this.list.numItems += 10\n    }\n\n}\n"]}