{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\Hall\\TimeSelect/assets\\Script\\Hall\\TimeSelect\\scrollviewTimesSelect.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Hall\\TimeSelect","sourcesContent":["\n\nconst {ccclass, property} = cc._decorator;\n\nexport const textColor = {\n    white : cc.color(255,255,255),\n    yellow : cc.color(234,238,139)\n}\n\n\n\n@ccclass\nexport default class scrollviewTimesSelect extends cc.Component {\n\n    @property(cc.Node)\n    content:cc.Node= null;\n    @property(cc.Node)\n    listItem:cc.Node=null;\n\n    // private _listItem = null;\n    // private content = null;\n    private tempItemY = [];\n    private tempItem = [];\n\n    // public selectItemIndex = 0;\n    // public slideEndFunc = null;\n\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        // let view = this.node.getChildByName(\"view\");\n        // this.content = view.getChildByName(\"content\");\n        // this._listItem = this.content.getChildByName(\"item\")\n        this.node.on('scrolling', this._callbackScrolling, this);\n        this.node.on('scroll-ended', this._callbackScrollEnded, this);\n    }\n\n    start () {\n    }\n\n    private _itemInit : Array<string> = null;\n    set itemInit(array : Array<string>){\n        this._itemInit = array;\n        this.content.removeAllChildren();\n        this.tempItem = [];\n        this.tempItemY = [];\n        let y = 0;\n        array.forEach(function(value, index){\n            var _item : cc.Node  = cc.instantiate(this.listItem)\n            var _numNode : cc.Node = _item.getChildByName(\"num\")\n            _numNode.getComponent(cc.Label).string = value;\n            _item.parent = this.content;\n            this.setColorByScale(_numNode, 0.8, textColor.white)\n            this.tempItemY.push(y)\n            this.tempItem.push(_item)\n            y += _item.height\n        },this);\n\n        this.selectedIndex = 0;\n        var scrollviewNode = this.node.getComponent(cc.ScrollView)\n        scrollviewNode.scrollToOffset(cc.v2(0, this.tempItemY[ this.selectedIndex ]));\n        var _numNode = this.tempItem[this.selectedIndex].getChildByName(\"num\")\n        this.setColorByScale(_numNode, 1, textColor.yellow)\n    }\n    get itemInit(){\n        return this._itemInit;\n    }\n    \n\n    private _selectedIndex : number = 0;\n    set selectedIndex(sIdx : number){\n        this._selectedIndex = sIdx;\n    }\n    get selectedIndex(){\n        return this._selectedIndex;\n    }\n\n    setColorByScale(node : cc.Node, scale : number, color : cc.Color){\n        node.color = color;\n        node.scale = scale\n    }\n\n    // update (dt) {}\n    \n    _callbackScrolling(scrollView) {\n        scrollView.content.children.forEach((childNode: cc.Node, idx : number) => {\n            var _numNode = childNode.getChildByName(\"num\")\n            this.setColorByScale(_numNode, 0.8, textColor.white)\n        },this)\n\n        for (let index = 0; index < this.tempItemY.length; index++) {\n            let offy = scrollView.getScrollOffset().y - 10;\n            let itemY = this.tempItemY[index];\n            let endItemY = this.tempItemY[this.tempItemY.length-1]\n            if (offy <= itemY || ( itemY >= endItemY && offy > endItemY) ){\n                this.selectedIndex = index\n                var numNode = this.tempItem[index].getChildByName(\"num\")\n                this.setColorByScale(numNode, 1, textColor.yellow);\n                break;\n            }\n        }\n\n    }\n\n    _callbackScrollEnded(scrollView){\n        var idx = this.selectedIndex;\n        var itemY = this.tempItemY[idx]\n        var scrollviewNode = this.node.getComponent(cc.ScrollView)\n        scrollviewNode.scrollToOffset(cc.v2( .1, itemY ));\n    }\n\n\n\n}\n"]}