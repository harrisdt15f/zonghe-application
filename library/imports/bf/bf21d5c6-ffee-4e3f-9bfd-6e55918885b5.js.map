{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\Hall\\Login/assets\\Script\\Hall\\Login\\registerPanel.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Hall\\Login","sourcesContent":["import { G_Utils } from '../../Tool/Utils';\nimport { G_UiForms } from '../../Tool/UiForms';\nimport { G_Language } from '../../Language/Language';\nimport { G_OnFire } from '../../Net/OnFire';\nimport { EventRequest, uiEventFunction } from '../../Config/uiEvent';\nimport { G_UserControl } from '../../Controller/UserControl';\n\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class registerPanel extends cc.Component {\n\n    @property(cc.Node)\n    phoneNumEditbox: cc.Node = null;  //号码\n    @property(cc.Node)\n    passwordEditbox: cc.Node = null;  //密码\n    @property(cc.Node)\n    passwordAgainbox: cc.Node = null;  //再次\n    @property(cc.Node)\n    invatationBox: cc.Node = null;  //邀请码\n    @property(cc.Node)\n    verificationBox: cc.Node = null;  //验证码\n\n\n    @property(cc.Node)\n    verBtnLanding: cc.Node = null;  \n    @property(cc.Label)\n    cdTimeLabel:cc.Label = null;\n\n    @property(cc.Node)\n    btnLanding: cc.Node = null;\n    // LIFE-CYCLE CALLBACKS:\n\n    private ver_mobile = null;  //验证码手机号\n    private ver_key = null;   \n   // private ver_code = null;  \n    private cd_time = 0;\n\n    onLoad () {\n        G_Utils.onClickEnd(this.btnLanding, this.onLanding, this)\n        G_Utils.onClickEnd(this.verBtnLanding,this.onVerificationClick,this)\n    }\n\n    start () {\n\n    }\n\n    update(dt){\n        if(this.cd_time >0){\n            this.cd_time -= dt;\n            this.onCheckVerificationState();\n        }\n    }\n\n    onEnable(){\n        this.onCheckVerificationState();    \n    }\n\n    onCheckVerificationState()\n    {\n        if(this.cd_time > 0){\n            this.cdTimeLabel.string = Math.floor(this.cd_time).toString(); \n        }\n        else{\n            this.cdTimeLabel.string = '发送';  \n        }\n    }\n\n    onVerificationClick(){\n        if(this.cd_time > 0)\n        {\n            return;\n        }\n        if(!this.verBtnLanding.getComponent(cc.Button).enabled)\n        {\n            return;\n        }\n        this.verBtnLanding.getComponent(cc.Button).enabled= false;\n        this.scheduleOnce(()=>{\n            this.verBtnLanding.getComponent(cc.Button).enabled= true;\n        },1);\n\n        let phone = this.phoneNumInfo \n        if(phone)\n        {\n            if(!G_Utils.isPoneAvailable(phone))\n            {\n                G_UiForms.hint(G_Language.get(\"PhoneFormatWrong\"));\n                return;\n            }\n            G_UserControl.requestVerificationCode(phone,function(ret){\n                if(ret.status){\n                    G_UiForms.hint(G_Language.get('verificationCodeSend'));\n\n                    this.ver_mobile = this.phoneNumInfo;\n                    this.cd_time = ret.data['nextReqTime'] - ret.data['currentReqTime'];\n                    this.ver_key = ret.data['verification_key'];\n                    // this.ver_code = ret.data['verification_code'];\n                    console.log('cd_time  '+ this.cd_time + \"  ver_code  \" +ret.data['verification_code']);\n                    this.onCheckVerificationState();   \n                }else\n                {\n                    G_UiForms.hint(ret.message);\n                }\n            }.bind(this))   \n        }else\n        {\n            console.log('phone   is empty');\n        }\n\n    }\n\n\n    onLanding(){\n        if(this.phoneNumInfo === ''){\n            G_UiForms.hint(G_Language.get(\"AccountIsEmpty\"))\n            return;\n        }\n        if(this.passwordInfo === ''){\n            G_UiForms.hint(G_Language.get(\"PasswordIsEmpty\"))\n            return;\n        }\n        if(this.passwordAgainInfo != this.passwordInfo){\n            G_UiForms.hint(G_Language.get(\"PasswordAgainDifference\"))\n            return;\n        }\n        if(this.verificationInfo === '')\n        {\n            G_UiForms.hint(G_Language.get(\"verificationIsEmpty\"))\n            return;\n        }\n        if(!this.btnLanding.getComponent(cc.Button).enabled)\n        {\n            return;\n        }\n        //this.btnLanding.getComponent(cc.Button).enabled= false;\n        //this.scheduleOnce(()=>{\n        //    this.btnLanding.getComponent(cc.Button).enabled= true;\n       // },1);\n        G_UserControl.requestRegister(this.ver_mobile,this.passwordInfo,  this.passwordAgainInfo,this.verificationInfo,this.ver_key,this.invatationInfo, function(ret){\n            //this.btnLanding.getComponent(cc.Button).enabled= true;\n            if(ret.status)\n            {\n                G_UiForms.hint(G_Language.get('registerSuccess'))\n            }else\n            {\n                G_UiForms.hint(ret.message);\n            }\n            G_OnFire.fire(uiEventFunction.colseBox)\n        }.bind(this))\n\n    }\n\n    set phoneNumInfo(text : string){\n        this.phoneNumEditbox.getComponent(\"MyEditbox\").getEdiboxComponent().string = text;\n    }\n    get phoneNumInfo(){\n        return this.phoneNumEditbox.getComponent(\"MyEditbox\").getEdiboxComponent().string\n    }\n\n    set passwordInfo(text : string){\n        this.passwordEditbox.getComponent(\"MyEditbox\").getEdiboxComponent().string = text;\n    }\n    get passwordInfo(){\n        return this.passwordEditbox.getComponent(\"MyEditbox\").getEdiboxComponent().string;\n    }\n\n    set passwordAgainInfo(text : string){\n        this.passwordAgainbox.getComponent(\"MyEditbox\").getEdiboxComponent().string = text;\n    }\n    get passwordAgainInfo(){\n        return this.passwordAgainbox.getComponent(\"MyEditbox\").getEdiboxComponent().string;\n    }    \n\n    set invatationInfo(text : string){\n        this.invatationBox.getComponent(\"MyEditbox\").getEdiboxComponent().string = text;\n    }\n    get invatationInfo(){\n        return this.invatationBox.getComponent(\"MyEditbox\").getEdiboxComponent().string;\n    }    \n\n    set verificationInfo(text : string){\n        this.verificationBox.getComponent(\"MyEditbox\").getEdiboxComponent().string = text;\n    }\n    get verificationInfo(){\n        return this.verificationBox.getComponent(\"MyEditbox\").getEdiboxComponent().string;\n    }    \n\n}\n"]}