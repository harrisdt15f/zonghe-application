{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Script\\Controller/assets\\Script\\Controller\\WithDrawControl.ts"],"names":[],"mappings":";;;;;;AAEA,gDAAiD;AAGjD,yDAAsD;AACtD,2DAA0D;AAC1D,6CAA8C;AAG9C;IAOI;QAHQ,mBAAc,GAAoB,IAAI,CAAC;QAWvC,eAAU,GAAG,KAAK,CAAC;QAOnB,aAAQ,GAAG,KAAK,CAAC;QAdrB,IAAI,CAAC,cAAc,GAAG,IAAI,+BAAc,EAAE,CAAC;IAC/C,CAAC;IAEM,mCAAS,GAAhB;QACI,OAAO,IAAI,CAAC,cAAc,CAAC;IAC/B,CAAC;IAIM,sCAAY,GAAnB;QAEI,OAAO,IAAI,CAAC,UAAU,CAAC;IAC3B,CAAC;IAIM,oCAAU,GAAjB;QAEI,OAAO,IAAI,CAAC,QAAQ,CAAC;IACzB,CAAC;IAED,kBAAkB;IAClB,4BAA4B;IAC5B,sCAAsC;IACtC,wBAAwB;IACxB,kCAAkC;IAClC,wBAAwB;IACxB,4BAA4B;IAC5B,0BAA0B;IAC1B,2BAA2B;IAE3B,0CAAgB,GAAhB,UAAiB,IAAI;QAEjB,IAAG,IAAI,CAAC,SAAS,EAAE,CAAC,aAAa,IAAI,IAAI,IAAE,IAAI,CAAC,SAAS,EAAE,CAAC,aAAa,CAAC,MAAM,IAAI,CAAC,EACrF;YACI,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;SAC/B;aAED;YACI,IAAI,EAAE,CAAC;SACV;IACL,CAAC;IAED,sCAAY,GAAZ,UAAa,IAAI;QACb,IAAG,IAAI,CAAC,SAAS,EAAE,CAAC,QAAQ,IAAI,IAAI,IAAE,IAAI,CAAC,SAAS,EAAE,CAAC,QAAQ,CAAC,MAAM,IAAI,CAAC,EAC3E;YACI,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;SAC1B;aAED;YACI,IAAI,EAAE,CAAC;SACV;IACL,CAAC;IAED;;OAEG;IACH,qCAAW,GAAX,UAAY,IAAI;QACZ,yBAAY,CAAC,OAAO,CAAC,2BAAW,CAAC,KAAK,EAAE,UAAS,GAAG;YACjD,OAAO,CAAC,GAAG,CAAC,kBAAkB,EAAC,GAAG,CAAC,CAAA;YAClC,IAAG,GAAG,CAAC,MAAM,EAAC;gBACV,IAAI,CAAC,SAAS,EAAE,CAAC,QAAQ,GAAG,GAAG,CAAC,IAAI,CAAC;gBACrC,sCAAsC;gBACtC,IAAG,IAAI,EACP;oBACI,IAAI,CAAC,GAAG,CAAC,CAAC;iBACb;aACJ;QACL,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAA;IAEjB,CAAC;IACD;;OAEG;IACH,0CAAgB,GAAhB,UAAiB,IAAI;QACjB,yBAAY,CAAC,OAAO,CAAC,2BAAW,CAAC,QAAQ,EAAE,UAAS,GAAG;YACnD,OAAO,CAAC,GAAG,CAAC,aAAa,EAAC,GAAG,CAAC,CAAA;YAC7B,IAAG,GAAG,CAAC,MAAM,EAAC;gBACV,IAAI,CAAC,SAAS,EAAE,CAAC,aAAa,GAAG,GAAG,CAAC,IAAI,CAAC;gBAC1C,IAAI,CAAC,aAAa,EAAE,CAAC;gBACrB,sCAAsC;gBACtC,IAAG,IAAI,EACP;oBACI,IAAI,CAAC,GAAG,CAAC,CAAC;iBACb;aACJ;QACL,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAA;IAClB,CAAC;IAED,uCAAa,GAAb;QAAA,iBAUC;QATG,IAAI,IAAI,GAAI,IAAI,CAAC,SAAS,EAAE,CAAC,aAAa,CAAA;QAC1C,IAAI,CAAC,OAAO,CAAC,UAAA,OAAO;YAChB,IAAG,OAAO,CAAC,IAAI,IAAI,QAAQ,EAAC;gBACxB,KAAI,CAAC,UAAU,GAAG,IAAI,CAAC;aAC1B;iBACD;gBACI,KAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;aACxB;QACL,CAAC,CAAC,CAAC;IACP,CAAC;IAED;;OAEG;IACH,0CAAgB,GAAhB,UAAiB,IAAI,EAAC,OAAO,EAAC,IAAI;QAC9B,yBAAY,CAAC,QAAQ,CAAC,2BAAW,CAAC,UAAU,EAAC,EAAC,YAAY,EAAC,IAAI,EAAC,aAAa,EAAC,OAAO,EAAC,EAAC,UAAS,GAAG;YAChG,OAAO,CAAC,GAAG,CAAC,SAAS,EAAC,GAAG,CAAC,CAAA;YACzB,IAAG,GAAG,CAAC,MAAM,EAAC;gBACV,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;gBACpB,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;aAC/B;iBACD;gBACI,IAAG,IAAI,EACP;oBACI,IAAI,CAAC,GAAG,CAAC,CAAC;iBACb;aACJ;QACL,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAA;IACjB,CAAC;IAED;;OAEG;IACH,+CAAqB,GAArB,UAAsB,IAAI,EAAC,OAAO,EAAC,QAAQ,EAAC,aAAa,EAAC,IAAI;QAC1D,yBAAY,CAAC,QAAQ,CAAC,2BAAW,CAAC,eAAe,EAC7C;YACI,YAAY,EAAC,IAAI;YACjB,aAAa,EAAC,OAAO;YACrB,eAAe,EAAC,QAAQ;YACxB,4BAA4B,EAAC,aAAa;SAC7C,EAAG,UAAS,GAAG;YACjB,OAAO,CAAC,GAAG,CAAC,SAAS,EAAC,GAAG,CAAC,CAAA;YAC1B,IAAG,GAAG,CAAC,MAAM,EAAC;gBACT,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;aAC/B;iBACD;gBACI,IAAG,IAAI,EACP;oBACI,IAAI,CAAC,GAAG,CAAC,CAAC;iBACb;aACJ;QACL,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAA;IACjB,CAAC;IAED;;OAEG;IACH,wCAAc,GAAd,UAAe,IAAI,EAAC,OAAO,EAAC,MAAM,EAAC,IAAI,EAAC,OAAO,EAAC,IAAI;QAChD,yBAAY,CAAC,QAAQ,CAAC,2BAAW,CAAC,QAAQ,EACtC;YACI,YAAY,EAAC,IAAI;YACjB,aAAa,EAAC,OAAO;YACrB,QAAQ,EAAC,MAAM;YACf,MAAM,EAAC,IAAI;YACX,SAAS,EAAC,OAAO;SACpB,EAAG,UAAS,GAAG;YACjB,OAAO,CAAC,GAAG,CAAC,SAAS,EAAC,GAAG,CAAC,CAAA;YAC1B,IAAG,GAAG,CAAC,MAAM,EAAC;gBACT,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;aAC/B;iBACD;gBACI,IAAG,IAAI,EACP;oBACI,IAAI,CAAC,GAAG,CAAC,CAAC;iBACb;aACJ;QACL,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAA;IACjB,CAAC;IAED;;OAEG;IACH,6CAAmB,GAAnB,UAAoB,IAAI,EAAC,OAAO,EAAC,MAAM,EAAC,IAAI,EAAC,OAAO,EAAC,QAAQ,EAAC,aAAa,EAAC,IAAI;QAC5E,yBAAY,CAAC,QAAQ,CAAC,2BAAW,CAAC,aAAa,EAC3C;YACI,YAAY,EAAC,IAAI;YACjB,aAAa,EAAC,OAAO;YACrB,QAAQ,EAAC,MAAM;YACf,MAAM,EAAC,IAAI;YACX,SAAS,EAAC,OAAO;YACjB,eAAe,EAAC,QAAQ;YACxB,4BAA4B,EAAC,aAAa;SAC7C,EAAG,UAAS,GAAG;YACjB,OAAO,CAAC,GAAG,CAAC,SAAS,EAAC,GAAG,CAAC,CAAA;YAC1B,IAAG,GAAG,CAAC,MAAM,EAAC;gBACT,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;aAC/B;iBACD;gBACI,IAAG,IAAI,EACP;oBACI,IAAI,CAAC,GAAG,CAAC,CAAC;iBACb;aACJ;QACL,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAA;IACjB,CAAC;IAED;;OAEG;IACH,0CAAgB,GAAhB,UAAiB,MAAM,EAAC,YAAY,EAAC,IAAI,EAAC,KAAK,EAAC,QAAQ,EAAC,IAAI;QACzD,yBAAY,CAAC,QAAQ,CAAC,2BAAW,CAAC,UAAU,EACxC;YACI,SAAS,EAAC,MAAM;YAChB,eAAe,EAAC,YAAY;YAC5B,YAAY,EAAC,IAAI;YACjB,mBAAmB,EAAC,KAAK;YACzB,kBAAkB,EAAC,QAAQ;SAC9B,EAAG,UAAS,GAAG;YACjB,OAAO,CAAC,GAAG,CAAC,WAAW,EAAC,GAAG,CAAC,CAAA;YAC5B,IAAG,GAAG,CAAC,MAAM,EAAC;gBACT,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;aAC/B;iBACD;gBACI,IAAG,IAAI,EACP;oBACI,IAAI,CAAC,GAAG,CAAC,CAAC;iBACb;aACJ;QACL,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAA;IACjB,CAAC;IAEG;;GAED;IACH,+CAAqB,GAArB,UAAsB,IAAI;QACtB,yBAAY,CAAC,QAAQ,CAAC,2BAAW,CAAC,cAAc,EAAC,IAAI,EAAG,UAAS,GAAG;YACjE,OAAO,CAAC,GAAG,CAAC,UAAU,EAAC,GAAG,CAAC,CAAA;YAC3B,IAAG,IAAI,EACP;gBACI,IAAI,CAAC,GAAG,CAAC,CAAC;aACb;QACJ,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAA;IACjB,CAAC;IAGD;;OAEG;IACH,yCAAe,GAAf,UAAgB,IAAI;QAChB,yBAAY,CAAC,OAAO,CAAC,2BAAW,CAAC,SAAS,EAAC,UAAS,GAAG;YACpD,OAAO,CAAC,GAAG,CAAC,iBAAiB,EAAC,GAAG,CAAC,CAAA;YACjC,IAAG,GAAG,CAAC,MAAM,EAAC;gBACV,sCAAsC;gBACtC,IAAG,IAAI,EACP;oBACI,IAAI,CAAC,GAAG,CAAC,CAAC;iBACb;aACJ;QACL,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAA;IACjB,CAAC;IAED;;OAEG;IACH,wCAAc,GAAd,UAAe,MAAM,EAAC,MAAM,EAAC,QAAQ,EAAC,IAAI;QACtC,yBAAY,CAAC,QAAQ,CAAC,2BAAW,CAAC,QAAQ,EACtC;YACI,QAAQ,EAAC,MAAM;YACf,SAAS,EAAC,MAAM;YAChB,eAAe,EAAC,QAAQ;SAC3B,EAAG,UAAS,GAAG;YACjB,OAAO,CAAC,GAAG,CAAC,SAAS,EAAC,GAAG,CAAC,CAAA;YACzB,IAAG,GAAG,CAAC,MAAM,EAAC;gBACV,sCAAsC;gBACtC,2BAAa,CAAC,qBAAqB,CAAC,IAAI,CAAC,CAAC;aAC7C;iBACD;gBACI,IAAI,CAAC,GAAG,CAAC,CAAC;aACb;QACL,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAA;IACjB,CAAC;IAED;;OAEG;IACH,8CAAoB,GAApB,UAAqB,IAAI;QACrB,yBAAY,CAAC,QAAQ,CAAC,2BAAW,CAAC,cAAc,EAC5C;YACI,MAAM,EAAC,CAAC;SACX,EAAG,UAAS,GAAG;YACjB,OAAO,CAAC,GAAG,CAAC,WAAW,EAAC,GAAG,CAAC,CAAA;YAC3B,IAAG,GAAG,CAAC,MAAM,EAAC;gBACV,IAAI,CAAC,SAAS,EAAE,CAAC,UAAU,GAAG,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC;gBAC5C,OAAO,CAAC,GAAG,CAAC,yBAAyB,GAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;gBAC5D,IAAI,CAAC,GAAG,CAAC,CAAC;aACb;QACL,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAA;IACjB,CAAC;IArSsB,wBAAQ,GAAqB,IAAI,eAAe,EAAE,CAAC;IAuS9E,sBAAC;CAzSD,AAySC,IAAA;AAEY,QAAA,iBAAiB,GAAG,eAAe,CAAC,QAAQ,CAAC","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\Controller","sourcesContent":["\nimport { G_UiForms } from \"../Tool/UiForms\";\nimport { G_HttpHelper } from \"../Net/HttpHelper\";\nimport { CODE } from \"../Config/IdentifyKey\";\nimport { PayConfig } from \"../Config/PayConfig\";\nimport { RequestEnum } from \"../Config/RequestConfig\";\nimport { WithDrawConfig } from \"../Config/WithDrawConfig\";\nimport { G_UserControl } from \"./UserControl\";\n\n\nclass WithDrawControl {\n  \n    public static readonly Instance : WithDrawControl = new WithDrawControl();\n\n    private withDrawConfig : WithDrawConfig = null;\n\n\n    constructor(){\n        this.withDrawConfig = new WithDrawConfig();\n    }\n\n    public getConfig(){\n        return this.withDrawConfig;\n    }\n\n    private bindAlipay = false;\n\n    public isBindAliPay()\n    {\n        return this.bindAlipay;\n    }\n\n    private bindBank = false;\n\n    public isBindBank()\n    {\n        return this.bindBank;\n    }\n\n    // Banks =\"Banks\",\n    // AlipayBind =\"AlipayBind\",\n    // AlipayBindFirst =\"AlipayBindFirst\",\n    // BankBind =\"BankBind\",\n    // BankBindFirst =\"BankBindFirst\",\n    // Accounts =\"Accounts\",\n    // AccountDel =\"AccountDel\",\n    // DrawCheck =\"DrawCheck\",\n    // WithDraw =\"WithDraw\",   \n\n    GetMyAccountList(call)\n    {\n        if(this.getConfig().MyAccountList == null||this.getConfig().MyAccountList.length <= 0)\n        {\n            this.requesMyAccounts(call);\n        }\n        else\n        {\n            call();\n        }\n    }\n\n    GetBanksList(call){\n        if(this.getConfig().BankList == null||this.getConfig().BankList.length <= 0)\n        {\n            this.requesBanks(call);\n        }\n        else\n        {\n            call();\n        }\n    }\n\n    /**\n     * 系统支持的银行列表\n     */\n    requesBanks(call){      \n        G_HttpHelper.httpGet(RequestEnum.Banks, function(ret){\n           console.log(\"[系统支持的银行列表]：返回数据\",ret)   \n            if(ret.status){\n                this.getConfig().BankList = ret.data;\n                //console.log(\"ret.data   \"+ret.data);\n                if(call)\n                {\n                    call(ret);\n                }\n            }\n        }.bind(this))\n        \n    }\n    /**\n     * 账户列表\n     */\n    requesMyAccounts(call){\n        G_HttpHelper.httpGet(RequestEnum.Accounts, function(ret){\n            console.log(\"[账户列表]：返回数据\",ret)   \n             if(ret.status){\n                 this.getConfig().MyAccountList = ret.data;\n                 this.checkBindType();\n                 //console.log(\"ret.data   \"+ret.data);\n                 if(call)\n                 {\n                     call(ret);\n                 }\n             }\n         }.bind(this))      \n    }\n\n    checkBindType(){\n        let list =  this.getConfig().MyAccountList\n        list.forEach(element => {\n            if(element.code == \"ALIPAY\"){\n                this.bindAlipay = true;\n            }else\n            {\n                this.bindBank = true;\n            }\n        });\n    }\n\n    /**\n     * 立刻提现-绑定支付宝\n     */\n    requesAlipayBind(name,account,call){      \n        G_HttpHelper.httpPost(RequestEnum.AlipayBind,{\"owner_name\":name,\"card_number\":account},function(ret){\n           console.log(\"绑定：返回数据\",ret)   \n            if(ret.status){\n                console.log(\"0000\");\n                this.requesMyAccounts(call);\n            }else\n            {\n                if(call)\n                {\n                    call(ret);\n                }\n            }\n        }.bind(this))        \n    }\n\n    /**\n     * 立刻提现-绑定支付宝首次\n     */\n    requesAlipayBindFirst(name,account,password,passwordAgain,call){      \n        G_HttpHelper.httpPost(RequestEnum.AlipayBindFirst,\n            {\n                \"owner_name\":name,\n                \"card_number\":account,\n                \"fund_password\":password,\n                \"fund_password_confirmation\":passwordAgain\n            },  function(ret){\n           console.log(\"绑定：返回数据\",ret)   \n           if(ret.status){\n                this.requesMyAccounts(call);\n            }else\n            {\n                if(call)\n                {\n                    call(ret);\n                }\n            }\n        }.bind(this))        \n    }\n\n    /**\n     * 立刻提现-绑定银行卡\n     */\n    requesBankBind(name,account,branch,code,bank_id,call){      \n        G_HttpHelper.httpPost(RequestEnum.BankBind,\n            {\n                \"owner_name\":name,\n                \"card_number\":account,\n                \"branch\":branch,\n                \"code\":code,\n                \"bank_id\":bank_id\n            },  function(ret){\n           console.log(\"绑定：返回数据\",ret)   \n           if(ret.status){\n                this.requesMyAccounts(call);\n            }else\n            {\n                if(call)\n                {\n                    call(ret);\n                }\n            }\n        }.bind(this))        \n    }\n\n    /**\n     * 立刻提现-绑定银行卡首次\n     */\n    requesBankBindFirst(name,account,branch,code,bank_id,password,passwordAgain,call){      \n        G_HttpHelper.httpPost(RequestEnum.BankBindFirst,\n            {\n                \"owner_name\":name,\n                \"card_number\":account,\n                \"branch\":branch,\n                \"code\":code,\n                \"bank_id\":bank_id,\n                \"fund_password\":password,\n                \"fund_password_confirmation\":passwordAgain\n            },  function(ret){\n           console.log(\"绑定：返回数据\",ret)   \n           if(ret.status){\n                this.requesMyAccounts(call);\n            }else\n            {\n                if(call)\n                {\n                    call(ret);\n                }\n            }\n        }.bind(this))        \n    }\n\n    /**\n     *  账户管理-账户删除\n     */\n    requesAccountDel(cardid,securityCode,name,vcode,vcodeKey,call){      \n        G_HttpHelper.httpPost(RequestEnum.AccountDel,\n            {\n                \"card_id\":cardid,\n                \"security_code\":securityCode,  \n                \"owner_name\":name,\n                \"verification_code\":vcode,    \n                \"verification_key\":vcodeKey,     \n            },  function(ret){\n           console.log(\"账户删除：返回数据\",ret)   \n           if(ret.status){\n                this.requesMyAccounts(call);\n            }else\n            {\n                if(call)\n                {\n                    call(ret);\n                }\n            }\n        }.bind(this))        \n    }\n\n        /**\n     *  账户管理-账户删除获取手机验证码\n     */\n    requesAccountDelVcode(call){      \n        G_HttpHelper.httpPost(RequestEnum.AccountDelCode,null,  function(ret){\n           console.log(\"验证码：返回数据\",ret)   \n           if(call)\n           {\n               call(ret);\n           }\n        }.bind(this))        \n    }\n\n\n    /**\n     *  检查是否设置取款密码\n     */\n    requesDrawCheck(call){      \n        G_HttpHelper.httpGet(RequestEnum.DrawCheck,function(ret){\n           console.log(\"检查是否设置取款密码：返回数据\",ret)   \n            if(ret.status){\n                //console.log(\"ret.data   \"+ret.data);\n                if(call)\n                {\n                    call(ret);\n                }\n            }\n        }.bind(this))        \n    }\n\n    /**\n     *  提现\n     */\n    requesWithDraw(amount,bankid,password,call){      \n        G_HttpHelper.httpPost(RequestEnum.WithDraw,\n            {\n                \"amount\":amount,\n                \"bank_id\":bankid,\n                \"fund_password\":password,             \n            },  function(ret){\n           console.log(\"提现：返回数据\",ret)   \n            if(ret.status){\n                //console.log(\"ret.data   \"+ret.data);\n                G_UserControl.sendspecialPlayerData(call);\n            }else\n            {\n                call(ret);\n            }\n        }.bind(this))        \n    }\n  \n    /**\n     *  提现记录\n     */\n    requesWithDrawRecord(call){      \n        G_HttpHelper.httpPost(RequestEnum.WithDrawRecord,\n            {\n                \"type\":3,           \n            },  function(ret){\n           console.log(\"提现记录：返回数据\",ret)   \n            if(ret.status){\n                this.getConfig().RecordList = ret.data.data;\n                console.log(\"ret.data.data.length   \"+ret.data.data.length);\n                call(ret);\n            }\n        }.bind(this))        \n    }\n\n}\n\nexport const G_WithDrawControl = WithDrawControl.Instance;\n"]}