{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Script\\Platform/assets\\Script\\Platform\\Platforms.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\Platform","sourcesContent":["import { G_UiForms } from '../Tool/UiForms';\nimport { G_Utils } from '../Tool/Utils';\n\n\n\nexport class Platforms {\n\n    public _toExitGame : boolean = null;\n\n    constructor(){\n    }\n\n    eixtGame(){\n        if(cc.sys.os == cc.sys.OS_ANDROID){\n            cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this)\n        }\n    }\n\n    \n    onKeyDown(event){\n        var self = this;\n        switch (event.keyCode) {\n            case cc.macro.KEY.back:\n                if (!self._toExitGame) {\n                    // 首次点击，重置该标记\n                    self._toExitGame = true;\n                    G_UiForms.hint(\"再次点击后退，退出游戏\")\n                    setTimeout(function(){\n                        self._toExitGame = false;\n                    },3000)\n                }else{\n                    // 已经点击过一次，则直接退出\n                    cc.game.end();\n                    return;\n                }\n            break;\n        }\n    }\n    webCopyString(str){\n        const el = document.createElement('textarea');\n        el.value = str;\n        el.setAttribute('readonly', '');\n        el.style.contain = 'strict';\n        el.style.position = 'absolute';\n        el.style.left = '-9999px';\n        el.style.fontSize = '12pt'; // Prevent zooming on iOS\n\n        const selection = getSelection();\n        var originalRange = null;\n        if (selection.rangeCount > 0) {\n            originalRange = selection.getRangeAt(0);\n        }\n        document.body.appendChild(el);\n        el.select();\n        el.selectionStart = 0;\n        el.selectionEnd = str.length;\n\n        var success = false;\n        try {\n            success = document.execCommand('copy');\n        } catch (err) {}\n\n        document.body.removeChild(el);\n\n        if (originalRange) {\n            selection.removeAllRanges();\n            selection.addRange(originalRange);\n        }\n\n        return success;\n    }\n\n    JsCopy(copyText){\n        /*\n        if (cc.sys.isNative && cc.sys.os == cc.sys.OS_ANDROID){\n            jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"JavaCopy\", \"(Ljava/lang/String;)V\", str);\n        }\n        */\n        if (cc.sys.isNative && cc.sys.isMobile) {\n            if(cc.sys.os == cc.sys.OS_ANDROID){\n                jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"JavaCopy\", \"(Ljava/lang/String;)V\", copyText);\n            }else if(cc.sys.os == cc.sys.OS_IOS){\n                jsb.reflection.callStaticMethod(\"NativeOcClass\", \n                                           \"callNativeCopyText:\",\n                                           copyText);\n            }\n        }else if (cc.sys.isBrowser) {           \n            if(G_Utils.isiOS()){\n                const el = document.createElement('input');\n                el.value = copyText;\n                el.style.opacity = '0';\n                document.body.appendChild(el);\n                const editable = el.contentEditable;\n                const readOnly = el.readOnly;\n                //el.contentEditable = true;\n                el.readOnly = false;\n                const range = document.createRange();\n                range.selectNodeContents(el);\n                const sel = window.getSelection();\n                sel.removeAllRanges();\n                sel.addRange(range);\n                el.setSelectionRange(0, 999999);\n                el.contentEditable = editable;\n                el.readOnly = readOnly;\n                const ret = document.execCommand('copy');\n                el.blur();\n                 document.body.removeChild(el);\n                // btn.text = ret ? '已复制' : '复制失败';\n\n            }else{\n                this.webCopyString(copyText);\n                /*\n                var textArea = document.getElementById(\"clipBoard\");\n                if (textArea === null) {\n                    textArea = document.createElement(\"textarea\");\n                    textArea.id = \"clipBoard\";\n\n                    textArea.textContent = copyText;\n                    document.body.appendChild(textArea);\n                }\n             //   textArea.select();\n                try {\n                    const msg = document.execCommand('copy') ? 'successful' : 'unsuccessful';\n                    document.body.removeChild(textArea);\n                } catch (err) {\n                }\n                */\n            }\n            \n        }\n\n\n\n\n    }\n     \n\n}\n"]}