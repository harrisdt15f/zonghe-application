{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\Hall\\shop/assets\\Script\\Hall\\shop\\wechatpayPanel.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Hall\\shop","sourcesContent":["import { G_OnFire } from '../../Net/OnFire';\nimport { uiEventFunction } from '../../Config/uiEvent';\nimport { G_Utils } from '../../Tool/Utils';\nimport { G_UiForms } from '../../Tool/UiForms';\nimport List from '../../Common/List';\nimport { G_PayControl } from '../../Controller/PayControl';\nimport { G_Language } from '../../Language/Language';\n/**\n * app 支付方式\n */\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class  wechatpayPanel extends cc.Component {\n\n    @property(cc.Node)\n    typeGrid:cc.Node = null;\n    @property(cc.Node)\n    typeItemPrefab:cc.Node = null;\n    @property(cc.Node)\n    typeDetail:cc.Node = null;\n    @property(cc.Node)\n    numberGrid:cc.Node = null;\n    @property(cc.Node)\n    numberItemPrefab:cc.Node = null;\n    @property(cc.Node)\n    bankDetail:cc.Node = null;\n    @property(cc.Node)\n    qrImage:cc.Graphics = null;\n    @property(cc.Node)\n    textTip:cc.Node = null;\n\n    @property(cc.Node)\n    numberEditbox: cc.Node = null;  //输入金额\n\n    private Data = null;   //充值类型data\n    private dataList = null;  //充值方式list\n    private curData = null;   //当前方式\n\n    private typeObjList =[] \n    private numObjList = []  \n\n    init (data) {\n        this.typeDetail.active = true;\n        this.bankDetail.active = false;\n        this.Data = data;\n        this.textTip.getComponent(cc.Label).string =\"\";\n        this.dataList = data.data;\n        this.showTypeList()\n    }\n\n    //充值渠道\n    showTypeList()\n    {\n        this.typeObjList.forEach(element => {\n            element.active = false;\n        });\n\n        for(let i=0;i<this.dataList.length;i++)\n        {\n            var item;\n            if(this.typeObjList[i] == null)\n            {\n                item = cc.instantiate(this.typeItemPrefab);\n                item.active = true;\n                item.name = i.toString();\n                this.typeGrid.addChild(item);\n                this.typeObjList.push(item);\n                G_Utils.onClickEnd(item, ()=>{\n                    this.showTypeDetail(i);\n                }, this)\n            }else\n            {\n                item = this.typeObjList[i];\n                item.active = true;\n                item.name = i.toString();\n            }\n            item.getChildByName(\"text\").getComponent(cc.Label).string = this.dataList[i].frontend_name\n        }\n        if(this.dataList.length > 0)\n        {\n            this.showTypeDetail(0);\n        }\n    }\n\n    //当前渠道详情\n    showTypeDetail(index)\n    {\n        this.curData  =this.dataList[index]\n        if(this.numObjList.length <= 0)\n        {\n            var list = G_PayControl.getPayConfig().payMoneyList;\n            for(let i = 0;i <list.length;i++){\n                var item = cc.instantiate(this.numberItemPrefab);\n                item.active = true;\n                item.name = i.toString();\n                item.getChildByName(\"text\").getComponent(cc.Label).string = list[i].toString();\n                this.numberGrid.addChild(item);\n                this.numObjList.push(item);\n                G_Utils.onClickEnd(item, ()=>{\n                    this.onNumberClick(i);\n                }, this)\n            }\n        }\n        this.textTip.getComponent(cc.Label).string =this.curData.desc;\n        this.numberEditbox.getChildByName(\"editbox\").getChildByName(\"text\").getComponent(cc.Label).string = this.curData.min + \" - \" + this.curData.max\n    }\n\n\n    onNumberClick(index)\n    {\n        console.log(\"index  \"+index)\n        var list = G_PayControl.getPayConfig().payMoneyList;\n        this.numberEditbox.getComponent(\"MyEditbox\").getEdiboxComponent().string = list[index];\n    }\n\n    onPayClick()\n    {\n        if(this.curData == null)\n        {\n            return;\n        }\n        console.log(\"this.NumInfo   \"+this.NumInfo);\n        let val = parseInt(this.NumInfo);\n        if(val < this.curData.min)\n        {\n            G_UiForms.hint(G_Language.get(\"payMinTip\")+this.curData.min);\n            return;\n        }\n        if(val > this.curData.max)\n        {\n            G_UiForms.hint(G_Language.get(\"payMaxTip\")+this.curData.max);\n            return;\n        }\n        G_PayControl.requesSendRecharge(this.Data.data.is_online,this.curData.id,val,function(ret){\n            if(ret.status)\n            {\n                let url =  ret.data.payContent;\n                switch(ret.data.mode)\n                {\n                    case \"html\":\n                        document.write(url);                      \n                    break;\n                    case \"qrcode\":  //展示二维码\n                       // this.initQrCode(url);\n                    break;\n                    case \" jump\":\n                        if(CC_JSB){\n                            jsb.openURL(url);\n                        }else{\n                            window.open(url)\n                        } \n                        break;\n                }\n                console.log(\"url  \"+url);\n            }\n\n        }.bind(this));\n\n    }\n    \n\n    set NumInfo(text : string){\n        this.numberEditbox.getComponent(\"MyEditbox\").getEdiboxComponent().string = text;\n    }\n    get NumInfo(){\n        return this.numberEditbox.getComponent(\"MyEditbox\").getEdiboxComponent().string\n    }\n\n\n}"]}