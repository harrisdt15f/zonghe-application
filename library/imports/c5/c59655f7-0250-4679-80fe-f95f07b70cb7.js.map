{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\Hall\\SetUI/assets\\Script\\Hall\\SetUI\\SoundPanel.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Hall\\SetUI","sourcesContent":["\n\nimport {G_Sound} from \"../../Tool/Sound\";\nimport { G_Storage } from '../../Tool/Storage';\nimport { G_UserControl } from '../../Controller/UserControl';\nimport { G_OnFire } from \"../../Net/OnFire\";\nimport { EventRequest, uiEventFunction } from \"../../Config/uiEvent\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class SoundPanel extends cc.Component {\n\n    // LIFE-CYCLE CALLBACKS:\n    private sounEffectBackground = null;\n    // private handle = null;\n    private sounEffectBoxWidth = null;\n    private musicSliderBoxWidth = null;\n    private musicBackground = null;\n\n    onLoad () {\n\n        let sounEffectSliderBox = this.node.getChildByName(\"sounEffectSliderBox\")\n        this.sounEffectBoxWidth = sounEffectSliderBox.width;\n\n        let sounEffectSlider = sounEffectSliderBox.getChildByName(\"sounEffectSlider\")\n        this.sounEffectBackground = sounEffectSlider.getChildByName(\"Background\")\n\n        let temp = this.sounEffectBackground.width / this.sounEffectBoxWidth\n        sounEffectSlider.getComponent(cc.Slider).progress = temp\n\n        sounEffectSlider.on('slide', this.onSounEffectSet.bind(this)) \n\n        let musicSliderBox = this.node.getChildByName(\"musicSliderBox\")\n        this.musicSliderBoxWidth = musicSliderBox.width;\n\n        let musicSlider = musicSliderBox.getChildByName(\"musicSlider\")\n        this.musicBackground = musicSlider.getChildByName(\"Background\")\n\n        let temp1 = this.musicBackground.width / this.musicSliderBoxWidth\n        musicSlider.getComponent(cc.Slider).progress = temp1\n        musicSlider.on('slide', this.onMusicSliderSet.bind(this)) \n\n        let btnColse = this.node.getChildByName(\"btnColse\")\n        btnColse.on(cc.Node.EventType.TOUCH_END,this.onExit.bind(this))\n        \n        let box = this.node.getChildByName(\"box\");\n        for (let index = 1; index <= 4; index++) {\n            let sound = box.getChildByName(\"sound_\"+index)\n            sound.on(cc.Node.EventType.TOUCH_END, this.onSelectSoun.bind(this));\n\n\n\n            let checkmark = sound.getChildByName(\"checkmark\")\n            checkmark.active = false;\n        }\n        this.setToggle(1)\n\n    }\n\n    start () {\n\n    }\n\n    onEnable(){\n        let musicVolume = G_Storage.getSoundMusicVolume()\n        if (musicVolume){\n            let musicSliderBox = this.node.getChildByName(\"musicSliderBox\")\n            let musicSlider = musicSliderBox.getChildByName(\"musicSlider\")\n            musicSlider.getComponent(cc.Slider).progress = Number(musicVolume)\n            this.musicBackground.width = this.musicSliderBoxWidth * Number(musicVolume)\n            musicSlider.getChildByName(\"Handle\").x = this.musicSliderBoxWidth * Number(musicVolume)\n        }\n\n        let effectVolume = G_Storage.getSoundEffectVolume()\n        if (effectVolume){\n            let sounEffectSliderBox = this.node.getChildByName(\"sounEffectSliderBox\")\n            let sounEffectSlider = sounEffectSliderBox.getChildByName(\"sounEffectSlider\")\n            sounEffectSlider.getComponent(cc.Slider).progress = Number(effectVolume)\n            this.sounEffectBackground.width =  this.musicSliderBoxWidth * Number(effectVolume)\n            sounEffectSlider.getChildByName(\"Handle\").x = this.sounEffectBoxWidth *  Number(effectVolume)\n        }\n\n    }\n\n    // update (dt) {}\n    \n    onMusicSliderSet(event){\n        // console.log(\"多少》》音乐\",event.progress)\n        this.musicBackground.width = this.musicSliderBoxWidth * event.progress\n        G_Sound.setMusicVolume(event.progress)\n    }\n\n    onSounEffectSet(event){\n        // console.log(\"多少》》音效\",   event.progress.toFixed(2), event.progress )\n        this.sounEffectBackground.width = this.sounEffectBoxWidth * event.progress\n        G_Sound.setEffectsVolume(event.progress)\n    }\n\n    onExit(){\n        // console.log(\"退出登录\")\n        G_UserControl.requesLoginOut(function(ret){\n            G_OnFire.fire(uiEventFunction.colseBox)\n        });\n    }\n\n    onSelectSoun(event){\n        let str = event.target.name\n        var strList = str.split(\"_\")\n        this.setToggle(strList[1])\n        G_Sound.soundEffect()\n    }\n\n    setToggle(key){\n        let box = this.node.getChildByName(\"box\");\n        for (let index = 1; index <= 4; index++) {\n            let sound = box.getChildByName(\"sound_\"+index)\n            let checkmark = sound.getChildByName(\"checkmark\")\n            checkmark.active = false;\n        }\n        let sound2 = box.getChildByName(\"sound_\"+key)\n        let checkmark = sound2.getChildByName(\"checkmark\")\n        checkmark.active = !checkmark.active;\n        \n    }\n\n    \n}\n"]}