{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\Hall\\shop/assets\\Script\\Hall\\shop\\ShopNode.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Hall\\shop","sourcesContent":["import { G_PayControl } from \"../../Controller/PayControl\";\nimport  ShopLeftItem from \"../shop/ShopLeftItem\";\nimport alipayPanel from \"./alipayPanel\";\nimport abankPanel from \"./payBankPanel\";\nimport PayRecordPanel from \"./PayRecordPanel\";\nimport { G_RequestControl } from \"../../Controller/RequestControl\";\nimport { RequestEnum } from \"../../Config/RequestConfig\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class ShopNode extends cc.Component {\n\n\n    @property(cc.Node)\n    leftGrid:cc.Node = null;\n    @property(cc.Node)\n    leftItem:cc.Node = null;\n    @property(cc.Node)\n    rightNode:cc.Node = null;\n    @property(cc.Node)\n    nonePanel:cc.Node = null;\n\n    private leftList = [];  //data\n    private offlineList = []\n\n    private leftObjList = []; //itemPrefab\n    private curLeftIndex = 0;\n    private curLeftData = null;\n\n\n    onLoad () {\n        let rightNode = this.node.getChildByName(\"RightNode\");\n        rightNode.getChildByName(\"payPanel\").active = true;\n    }\n\n    onEnable()\n    {\n        this.LoadLeft();\n    }\n    LoadLeft()\n    {     \n        let cd = G_RequestControl.getConfig().getCD(RequestEnum.PayInfo)\n        if(cd < 0)\n        {\n            G_PayControl.requesRechargeType(function(ret){\n                let list = G_PayControl.getPayConfig().dataType\n                this.LoadData(list);\n\n            }.bind(this));\n        }else\n        {\n            let list = G_PayControl.getPayConfig().dataType\n            if(list && list.length > 0)\n            {\n                this.LoadData(list);\n            }\n        }\n    }\n\n    LoadData(list){\n        let x = 0;\n        let y = 0;  \n        for(let i=0;i<list.length;i++){\n            let tt = list[i]\n            G_PayControl.getPayConfig().setPayItemInfo(tt.sign,tt.name,tt.is_online)\n            let info = G_PayControl.getPayConfig().getPayItemInfo(tt.sign);\n            if(info)\n            {\n                if(tt.is_online == 1)  //线上\n                {\n                    let leftInfo = {};\n                    leftInfo[\"data\"] = tt;\n                    leftInfo[\"config\"] = info;\n                    leftInfo[\"is_online\"] = 1;\n                    this.leftList[x] = leftInfo;\n                    x++;\n                }else\n                {\n                    let leftInfo = {};\n                    leftInfo[\"data\"] = tt;\n                    leftInfo[\"config\"] = info;\n                    this.offlineList[y] = leftInfo;\n                    y++;\n                }\n            }\n        }\n        if(this.offlineList.length > 0)\n        {\n            let leftInfo = {};\n            leftInfo[\"is_online\"] = 0;\n            leftInfo[\"config\"] = G_PayControl.getPayConfig().getPayItemInfo(\"offline\");\n            leftInfo[\"data\"] = this.offlineList;\n            this.leftList.push(leftInfo);\n        }\n        //充值记录\n        let leftInfoTwo = {};\n        leftInfoTwo[\"is_online\"] = -1;\n        leftInfoTwo[\"config\"] = G_PayControl.getPayConfig().getPayItemInfo(\"record\");\n        leftInfoTwo[\"data\"] = null;\n        this.leftList.push(leftInfoTwo);\n    \n        if(this.leftList.length > 0)\n        {\n            this.showLeft();\n        }\n    }\n    showLeft()\n    {\n        for(let i=0;i<this.leftList.length;i++)\n        {\n            var item ;\n            if(this.leftObjList.length >i)\n            {\n                item = this.leftObjList[i];\n                item.active = true;\n            }else\n            {\n                item = cc.instantiate(this.leftItem);\n                item.active = true;\n                this.leftGrid.addChild(item);\n                this.leftObjList.push(item);\n            }\n\n           // item.active = true;\n           // this.leftGrid.addChild(item);\n            //this.leftObjList.push(item);\n            var itemJs = item.getComponent(ShopLeftItem);             \n            itemJs.init(this.leftList[i],i,(index,data)=>{\n                this.onSelectedItem(index,data);\n            });\n        }\n        if(this.curLeftIndex <= 0)\n        {\n            this.onSelectedItem(0,this.leftList[0]);\n        }\n    }\n\n    //G_Utils.onClickEnd(item, this.onToggleEnd, this)\n    onSelectedItem(index,data){\n        if(this.curLeftIndex > 0 && this.curLeftIndex == index+1)\n        {\n            return;\n        }\n        if(this.curLeftIndex > 0 && this.curLeftIndex <= this.leftList.length + 1)\n        {\n            var tt = this.leftObjList[this.curLeftIndex - 1].getComponent(ShopLeftItem);\n            tt.setSelectState(false);\n        }\n        this.curLeftIndex = index + 1;\n        var ttt = this.leftObjList[this.curLeftIndex - 1].getComponent(ShopLeftItem);\n        ttt.setSelectState(true);\n        this.curLeftData = data;\n        console.log(\"index>>>\",index,\"   \",this.curLeftData.config.name);\n        this.onShowRightInfo();\n    }\n    private restttt;\n    onShowRightInfo()\n    {\n        this.rightNode.children.forEach(element => {\n            element.active = false;\n        });\n        this.rightNode.children.forEach(element => {\n            if(this.curLeftData.is_online == 1)    //线上\n            {\n                if(this.curLeftData.config.panel == element.name)\n                {\n                    console.log(\"open panel \",element.name);\n                    if(this.curLeftData.data.online_infos.length > 0)\n                    {\n                        element.active = true;\n                        let script = element.getComponent(alipayPanel);  \n                        script.init(this.curLeftData)                       \n                    }else\n                    {\n                        this.nonePanel.active = true;                      \n                    }\n                }\n            }\n            else if(this.curLeftData.is_online == 0)    //线下\n            {\n                if(element.name == this.curLeftData.config.panel)\n                {\n                    element.active = true;\n                    let script = element.getComponent(abankPanel); \n                    script.init(this.curLeftData);\n                }\n            }\n            else  //充值记录\n            {\n                if(element.name == this.curLeftData.config.panel)\n                {\n                    element.active = true;\n                   // let script = element.getComponent(PayRecordPanel); \n                   // script.init(this.curLeftData);\n                }\n            }\n        });\n      \n      \n    }\n\n\n}\n"]}