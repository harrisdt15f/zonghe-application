{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\Hall\\Activity/assets\\Script\\Hall\\Activity\\SignInBox.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Hall\\Activity","sourcesContent":["\n\n\nimport { G_Utils } from '../../Tool/Utils';\nimport List from '../../Common/List';\nimport { G_UiForms } from '../../Tool/UiForms';\nimport { G_Language } from '../../Language/Language';\n\nconst colorList = [\n    cc.color(108,20,19),\n    cc.color(247,239,149),\n    cc.color(255,255,255),\n]\n \nlet tempSignInList =[]\n\n\nconst {ccclass, property} = cc._decorator;\n\n\nclass DateSignin{\n    readonly _time : Date = new Date();\n    constructor(){\n    }\n    /**\n     * 获取当月总天数\n     * @return number 总天数\n     */\n    getNowMonthDaySum() : number {\n        let year = this._time.getFullYear();\n        let month = this._time.getMonth() + 1;\n        var date = new Date(year, month, 0);\n        return date.getDate();\n    }\n\n    getNowMonth() : number {\n        return this._time.getMonth();\n    }\n    \n    getNowDay() : number {\n        return this._time.getDate();\n    }\n}\n\n@ccclass\nexport default class SignInBox extends cc.Component {\n \n    @property(List)\n    list : List = null;\n\n    @property(cc.SpriteAtlas)\n    headAtlas : cc.SpriteAtlas = null;\n    @property(cc.Sprite)\n    head :　cc.Sprite = null;\n    @property(cc.Label)\n    labDay : cc.Label = null;\n\n\n    private _currMonth = null;\n    private _currDay = null;\n\n    readonly _datesignin : DateSignin = new DateSignin();\n\n    //文字\n    didNotSignIn = G_Language.get(\"DidNotSignIn\")\n    alreadySignedIn = G_Language.get(\"AlreadySignedIn\")\n    toSignIn= G_Language.get(\"ToSignIn\")\n    signinsucceed= G_Language.get(\"signinsucceed\")\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        tempSignInList =[];\n        this.initListItem()\n        let _month = this._datesignin.getNowMonth()\n        this._currMonth = G_Utils.sectionToChinese(Number(_month + 1))+\"月\" \n        var mDayNum = this._datesignin.getNowMonthDaySum();\n        this._currDay = this._datesignin.getNowDay()\n        this.list.numItems = mDayNum;\n    }\n\n    start () {\n    }\n\n    // update (dt) {}\n\n    initListItem(){\n        let temp = [2,6,10]\n        let flag = true;\n        let sum = this._datesignin.getNowMonthDaySum();\n        for (let index = 0; index <= sum; index++) {\n            flag = true;\n            for (let j = 0; j < temp.length; j++) {\n                if(index == temp[j]){\n                    tempSignInList.push(1)\n                    flag = false;\n                }\n            }\n            if(flag){\n                tempSignInList.push(0)\n            }\n        }\n    }\n\n    onEnable(){\n        this.list.scrollTo(this._currDay-1, .1, null, false);\n    }\n\n\n    onListRender(item: cc.Node, idx: number) {\n        var currDay = idx + 1;\n        var data = tempSignInList[idx]\n        var gx = item.getChildByName(\"fg\")\n        gx.active = false;\n        let label1 = item.getChildByName(\"label_1\")\n        let label2 = item.getChildByName(\"label_2\")\n        let label3 = item.getChildByName(\"label_3\")\n        label2.getComponent(cc.Label).string =  this._currMonth\n        label3.getComponent(cc.Label).string = String(idx+1)\n        if(currDay >= this._currDay ){\n            if (data == 1){\n                this.setLabel(item, colorList[1], this.alreadySignedIn)\n            }else{\n                this.setLabel(item, colorList[2], this.toSignIn)\n                gx.active = currDay == this._currDay;\n            }\n        }else{\n            // gx.active = false;\n            if (data == 1){\n                this.setLabel(item, colorList[1], this.alreadySignedIn)\n            }else{\n                this.setLabel(item,colorList[0], this.didNotSignIn)\n            }\n        }\n    }\n\n    //当列表项被选择...\n    onListSelected(item: any, selectedId: number, lastSelectedId: number, val: number) {\n        if (!item)\n            return;\n\n        var data = tempSignInList[selectedId]\n        var index = selectedId + 1;\n        if(index  == this._currDay){\n            let tips = data != 1 ? this.signinsucceed : this.alreadySignedIn;\n            G_UiForms.hint(tips)\n            var gx = item.getChildByName(\"fg\")\n            gx.active = false;\n        }\n\n        if(index > this._currDay){\n            G_UiForms.hint(this.didNotSignIn)\n        }\n\n        if(index < this._currDay){\n            let tips = data != 1 ? this.didNotSignIn : this.alreadySignedIn;\n            G_UiForms.hint(tips)\n        }\n\n    }\n\n\n    setLabel(item : cc.Node, color : cc.Color, txt : string){\n        let lab1 = item.getChildByName(\"label_1\")\n        let lab2 = item.getChildByName(\"label_2\")\n        let lab3 = item.getChildByName(\"label_3\")\n        lab1.getComponent(cc.Label).string = txt\n        lab1.color = color\n        lab2.color = color\n        lab3.color = color\n    }\n\n    onClose(){\n        this.node.active = false;\n    }\n\n}\n"]}