{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Script\\Hall/assets\\Script\\Hall\\PagingScrollView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\Hall","sourcesContent":["\n\n// this.content.getComponent(cc.Layout).spacingY\n// this.content.getComponent(cc.Layout).spacingX\n// this.content.getComponent(cc.Layout).paddingBottom\n// this.content.getComponent(cc.Layout).paddingLeft\n// this.content.getComponent(cc.Layout).paddingRight\n// this.content.getComponent(cc.Layout).paddingTop\n// this.content.getComponent(cc.Layout).verticalDirection\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class PagingScrollView extends cc.Component {\n\n    @property(cc.Node)\n    item : cc.Node = null;\n\n    @property(cc.Node)\n    labelTop:cc.Node = null;\n    @property(cc.Node)\n    labelBottom:cc.Node = null;\n\n    //----------------------\n\n    public content = null;\n    public view = null;\n\n    private tempArray = [];\n\n    private endCount = 10;\n    private mvoeCount = 0;\n    private startCount = 0;\n    private viewHeight = 0;\n\n    public addItemFunc = null;\n    public toTopRequestFunc = null;\n    public toBottomRequesFunc = null;\n\n    time = 0;\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        \n        this.view = this.node.getChildByName(\"view\");\n        this.content = this.view.getChildByName(\"content\");\n        this.content.removeAllChildren();\n        // let arrayItem = this.content.children\n        this.node.on('scroll-to-top', this.callbackToTop, this);\n        this.node.on('scroll-to-bottom', this.callbackToBottom, this);\n        this.node.on('touch-up', this.callbackTouchUp, this);\n\n        this.node.on('bounce-bottom', this.callbackBounceBottom, this);\n        this.node.on('bounce-top', this.callbackBounceTop, this);\n\n        this.topTextActive(false)\n        this.bottomTextActive(false)\n\n        for (let index = 0; index < 13; index++) {\n           this.tempArray.push(index+\"测试：\"+index)\n        }\n\n    }\n\n    start () {\n        this.init();\n    }\n\n    // update (dt) {\n    // }\n\n    init(){\n        var _layout = this.content.getComponent(cc.Layout)\n        var _spacingy = _layout.spacingY\n        var top = _layout.paddingTop\n        var bottom = _layout.paddingBottom\n        var y = 0;\n        var h = 0;\n        for (let index = this.startCount; index < this.endCount; index++) {\n            if (this.tempArray[index]){\n                let temp = cc.instantiate(this.item)\n                temp.parent = this.content\n                h += temp.height;\n                y += _spacingy;\n                if (this.addItemFunc){\n                    this.addItemFunc(temp, this.tempArray[index], index)\n                }\n            }\n        }\n        this.viewHeight = h + y + top + bottom;\n        if(this.tempArray.length <10 && this.viewHeight <  this.view.height){\n            this.viewHeight += this.view.height \n        }\n        this.content.height  += this.viewHeight\n    }\n\n\n    callbackToTop(scrollView){\n        // console.log(\"最顶\",scrollView.getScrollOffset())\n        this.topTextActive(true)\n        if (this.toTopRequestFunc) {\n            this.toTopRequestFunc();\n        }  \n    }\n\n    callbackToBottom(){\n        if (this.mvoeCount >= Math.floor(this.tempArray.length / 10)){\n            // console.log(\"最低层了\")\n            this.bottomTextActive(true)\n            return;\n        }\n        if (this.toBottomRequesFunc){\n            this.toBottomRequesFunc();\n        }\n        this.mvoeCount++;\n        this.endCount += 10;\n        this.startCount += 10;\n        this.init();\n    }\n\n\n    callbackTouchUp(scrollView){\n    }\n\n    callbackBounceBottom(){\n        console.log(\"弹跳最低\")\n        this.bottomTextActive(false)\n    }\n\n    callbackBounceTop(){\n        console.log(\"弹跳最高\")\n        this.topTextActive(false)\n        this.content.removeAllChildren();\n        this.mvoeCount = 0;\n        this.endCount = 10;\n        this.startCount = 0;\n        this.content.height = 0\n        this.viewHeight = 0;\n        this.init();\n    }\n\n\n    topTextActive(flag = false){\n        if(this.labelTop){\n            this.labelTop.active = flag;\n        }\n    }\n    bottomTextActive(flag = false){\n        if(this.labelBottom){\n            this.labelBottom.active = flag;\n        }\n    }\n}\n"]}