{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\Hall\\Withdraw/assets\\Script\\Hall\\Withdraw\\ManagePanel.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Hall\\Withdraw","sourcesContent":["\nimport { G_OnFire } from '../../Net/OnFire';\nimport { ACCOUNT_TYPE ,BANK_CARD_NAME} from \"../../Config/config\"\nimport {uiEventFunction} from \"../../Config/uiEvent\"\nimport List from '../../Common/List';\nimport { G_WithDrawControl } from '../../Controller/WithDrawControl';\nimport AccountDelTk from './AccountDelTk';\n\nconst {ccclass, property} = cc._decorator;\n\nclass tempModel{\n    accountType : any;\n    bankType : any;\n    number : any;\n}\n\n@ccclass\nexport default class ManagePanel extends cc.Component {\n\n    @property(List)\n    list : List = null;\n    @property(cc.Node)\n    delNode:cc.Node = null;\n\n    @property(cc.SpriteAtlas)\n    bankAtlas : cc.SpriteAtlas = null;\n    @property(cc.SpriteAtlas)\n    com9sAtlas : cc.SpriteAtlas = null;\n    @property(cc.SpriteAtlas)\n    caption : cc.SpriteAtlas = null;\n    \n    // private content = null;\n    private temp = [];\n    private manageAddNode = null;\n    // private scrollviewAddBank = null;\n\n    onLoad () {\n        this.list.node.active = true;\n        this.manageAddNode = this.node.getChildByName(\"manageAddNode\")\n        this.manageAddNode.active = false;\n\n        G_OnFire.on(uiEventFunction.manage, this.setManagePanelActive.bind(this));\n        G_OnFire.on(uiEventFunction.atOnceManage, this.setManagePanelActive.bind(this));\n\n    }\n\n    start () {\n\n    }\n\n    onEnable()\n    {\n        this.setManagePanelActive(true)\n    }\n\n    // update (dt) {}\n\n    onDestroy(){\n        G_OnFire.off(uiEventFunction.manage);\n    }\n    \n\n    accountBySeparator(account : string){\n        var strLen = Math.round( account.length / 4 )\n        var count = 0\n        let str = \"\";\n        for (let index = 0; index < strLen; index++) {\n            var strNo = account.substring(count, count + 4)\n            var separator = strNo.length <= 3 ?  \"\" : \"/\";\n            str += strNo.concat(separator)\n            count += 4;\n        }\n        return str;\n    }\n\n    accountBySeparatorSuffix(account : string){\n        var strList = account.split(\"@\")\n        return strList\n    }\n\n    setManagePanelActive(flag){\n        this.list.node.active = flag;       \n        this.manageAddNode.active = !flag;\n        this.delNode.active = false;\n        this.temp = [];\n        G_WithDrawControl.GetMyAccountList(()=>{\n            this.temp = G_WithDrawControl.getConfig().MyAccountList;\n           this.list.numItems = this.temp.length + 1\n        });\n    }\n\n    \n    onListRender(item: cc.Node, idx: number) {\n        if(!item)\n            return;\n       // console.log(\"idx   \",idx);\n        \n        var box = item.getChildByName(\"box\");\n        var sprAccountName = item.getChildByName(\"sprAccountName\")\n        var sprAdd = item.getChildByName(\"sprAdd\")\n\n        var labelNode = item.getChildByName(\"labelNode\")\n        var labAccount = labelNode.getChildByName(\"labAccount\")\n       // var sprSuffix = labelNode.getChildByName(\"sprSuffix\")\n        //console.log(\"idx  \"+idx+ \" this.temp.length  \"+this.temp.length);\n        if(this.temp.length > idx){\n            sprAdd.active =false;\n            labelNode.active = true;\n            sprAccountName.active = true;\n            box.active = true;\n            let config = G_WithDrawControl.getConfig().getPayItemInfo(this.temp[idx].code)\n            this.setSpriteFrame(sprAccountName, this.bankAtlas, config.nameSprite)\n            this.setSpriteFrame(box, this.bankAtlas, config.image);\n            labAccount.getComponent(cc.Label).string = this.temp[idx].card_number_hidden\n           // sprSuffix.active = this.temp[idx].code == \"ALIPAY\"\n        }else   \n        {   // add\n            sprAdd.active =true;\n            labelNode.active = false;\n            sprAccountName.active = false;\n            box.active = false;\n        }\n    }\n\n    //更新图案\n    setSpriteFrame(target : cc.Node, atlas : cc.SpriteAtlas , frameName : string){\n        target.getComponent(cc.Sprite).spriteFrame = atlas.getSpriteFrame(frameName);\n    }\n\n    //当列表项被选择...\n    onListSelected(item: any, selectedId: number, lastSelectedId: number, val: number) {\n        if (!item)\n            return;\n\n         console.log(\"》》》》》》》》\",selectedId,this.temp[selectedId])\n        // var data = this.temp[selectedId]\n        // if(data.accountType == ACCOUNT_TYPE.NONE){\n        //     this.manageAddNode.active = true;\n        //     //this.list.node.active = false;\n        // }\n        if(this.temp.length > selectedId)\n        {           \n            this.delNode.active = true;\n            var s1 = cc.scaleTo(0.1, 1.1)\n            var s2 = cc.scaleTo(0.1, 1)\n            var seq = cc.sequence(s1,s2)\n            this.delNode.runAction(seq)\n            this.delNode.getComponent(AccountDelTk).init( this.temp[selectedId])\n        }else\n        {\n            this.manageAddNode.active = true;\n            this.list.node.active = false;  \n        }\n   \n    }\n}\n"]}