{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\Hall\\Withdraw/assets\\Script\\Hall\\Withdraw\\RecordPanel.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Hall\\Withdraw","sourcesContent":["import { G_Language } from '../../Language/Language';\nimport List from '../../Common/List';\nimport { G_UserControl } from '../../Controller/UserControl';\nimport { G_WithDrawControl } from '../../Controller/WithDrawControl';\nimport { G_Utils } from '../../Tool/Utils';\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class RecordPanel extends cc.Component {\n\n\n    @property(List)\n    list : List = null;\n\n    @property(cc.Node)\n    typeList : cc.Node = null;\n    @property(cc.Node)\n    stateList : cc.Node = null;\n    @property(cc.Node)\n    btnChaXun : cc.Node = null;\n    @property(cc.Node)\n    mainObj : cc.Node = null;\n    @property(cc.Node)\n    detailObj : cc.Node = null;\n\n    @property(cc.Label)\n    detail_MoneyText:cc.Label = null;\n    @property(cc.Label)\n    detail_StateText:cc.Label = null;\n    @property(cc.Label)\n    detail_OrderText:cc.Label = null;\n    @property(cc.Label)\n    detail_TimeText:cc.Label = null;\n    @property(cc.Label)\n    detail_TypeText:cc.Label = null;\n    @property(cc.Label)\n    detail_DescText:cc.Label = null;\n\n    // private classMenu = null;\n    private _typeMenu = null;\n    private _stateMenu = null;\n    private _updateQueryFlag = false;\n\n    private curList = null;\n    private curBeginTimeDate = null;\n    private curEndTimeDate = null;\n\n    private dateType = 1;\n\n    onLoad () {\n       // let btnChaXun = this.node.getChildByName(\"btnChaXun\")\n        this.btnChaXun.on(cc.Node.EventType.TOUCH_END, this.onChaXun.bind(this));\n        //this.list.numItems = 2;\n        if(this.typeList){\n            this._typeMenu = this.typeList.getComponent(\"MyPulldownMenu\")\n            this._typeMenu.menuData = G_Language.get(\"withDrawTypeList\")\n            let _length = G_Language.get(\"withDrawTypeList\").length\n            if(_length >=8)\n            {\n                this._typeMenu.list.node.height = 37 * 8;\n            }else\n            {\n                this._typeMenu.list.node.height = _length > 0 ? (37*_length):37;\n            }\n            var selectedId = this._typeMenu.selectResult.selectedId;\n            var selectedText = this._typeMenu.selectResult.text;\n            console.log(\"选择了什么》》\",selectedId,selectedText)\n        }\n        if(this.stateList){\n            this._stateMenu = this.stateList.getComponent(\"MyPulldownMenu\")\n            this._stateMenu.menuData = G_Language.get(\"withDrawStateList\")\n            let _length = G_Language.get(\"withDrawStateList\").length\n            if(_length >=8)\n            {\n                this._stateMenu.list.node.height = 37 * 8;\n            }else\n            {\n                this._stateMenu.list.node.height = _length > 0 ? (37*_length):37;\n            }\n            var selectedId = this._stateMenu.selectResult.selectedId;\n            var selectedText = this._stateMenu.selectResult.text;\n            console.log(\"选择了什么》》\",selectedId,selectedText)\n        }\n\n    }\n\n    onEnable()\n    {\n        this.mainObj.active = true;\n        this.detailObj.active = false;\n        G_WithDrawControl.requesWithDrawRecord(function(ret){         \n            this.showInfo();\n        }.bind(this));\n    }\n\n    onChaXun(){\n        this._updateQueryFlag = true;\n        this.list.content.removeAllChildren();\n        var typeId =  G_WithDrawControl.getConfig().withDrawTypeConfig[this._typeMenu.selectResult.selectedId].account_type;\n        var stateId =  G_WithDrawControl.getConfig().withDrawStateConfig[this._stateMenu.selectResult.selectedId].status;\n        //var selectedText = this._typeMenu.selectResult.text;\n        this.curList = G_WithDrawControl.getConfig().getRecordListInfo(typeId,stateId,this.curBeginTimeDate,this.curEndTimeDate);\n        this.list.numItems = this.curList.length;\n    }\n\n    showInfo(){\n        this.getTimeDate();   \n        this.onChaXun();  \n    }\n\n    onToggleClick(event){\n        //console.log(\"event.name:\",event.target._localZOrder)\n        this.dateType =  event.target._localZOrder;    //1.全部 2.昨日 3.今日 4.上周 5.上月\n        this.getTimeDate();   \n    }\n\n    getTimeDate()\n    {\n        G_Utils.getTimeDate(this.dateType,function(begin,end){\n            this.curBeginTimeDate = begin;\n            this.curEndTimeDate = end;\n        }.bind(this))\n    }\n\n    onListRender(item: cc.Node, idx: number) {\n        //console.log(\"item   \",this.curList.length);\n        //console.log(\"idx   \",idx);\n        item.getChildByName(\"sprDiSe\").active = idx % 2 == 0;\n        if(this.curList.length > idx)\n        {\n            let cur = this.curList[idx]\n            //item.strin = idx;\n            item.getChildByName(\"label_0\").getComponent(cc.Label).string = parseInt(cur.amount).toFixed(2);\n            item.getChildByName(\"label_1\").getComponent(cc.Label).string = G_WithDrawControl.getConfig().ServerTypeConfig[cur.account_type].name;\n            item.getChildByName(\"label_2\").getComponent(cc.Label).string = G_WithDrawControl.getConfig().ServerStateConfig[cur.status].name;\n            item.getChildByName(\"label_3\").getComponent(cc.Label).string = cur.created_at\n            item.getChildByName(\"btn\").name = idx.toString();\n        }\n    }\n\n    onRequestData(item: cc.Node, idx: number){\n        // if (this.list.length >= 99){\n        //     return;\n        // }\n        // if(this._updateQueryFlag){\n        //     this._updateQueryFlag = false;\n        //     return;\n        // }\n        // this.list.numItems += 10\n    }\n    \n    onDetailClick(event){\n       // console.log(\"event  \",event.target);\n       // console.log(\"event  \",event.target._localZOrder);\n        var idx = parseInt(event.target.name);\n        if(this.curList.length > idx)\n        {\n            var cur = this.curList[idx]\n            this.mainObj.active = false;\n            this.detailObj.active = true;\n            this.detail_MoneyText.string = parseInt(cur.amount).toFixed(2);\n            this.detail_OrderText.string = cur.order_no.toString();\n            this.detail_StateText.string = G_WithDrawControl.getConfig().ServerStateConfig[cur.status].name;\n            this.detail_TimeText.string = cur.created_at\n            this.detail_TypeText.string = G_WithDrawControl.getConfig().ServerTypeConfig[cur.account_type].name;\n            this.detail_DescText.string = \"\";\n        }\n    }\n\n    onDetailClose()\n    {\n        this.mainObj.active = true;\n        this.detailObj.active =false;\n    }\n\n}\n"]}