{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Script\\Controller/assets\\Script\\Controller\\VipControl.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\Controller","sourcesContent":["\nimport { G_UiForms } from \"../Tool/UiForms\";\nimport { G_HttpHelper } from \"../Net/HttpHelper\";\nimport { CODE } from \"../Config/IdentifyKey\";\nimport { VipConfig } from \"../Config/VipConfig\";\nimport { G_OnFire } from \"../Net/OnFire\";\nimport { EventRequest } from \"../Config/uiEvent\";\nimport { G_UserControl } from \"./UserControl\";\n\n\nclass VipControl {\n  \n    public static readonly Instance : VipControl = new VipControl();\n\n    private vipConfig : VipConfig = null;\n\n\n    constructor(){\n        this.vipConfig = new VipConfig();\n    }\n\n    public getVipConfig(){\n        return this.vipConfig;\n    }\n\n\n   \n\n    /**\n     * 获取VIP配置\n     */\n    requesVipData(){\n        if(this.vipConfig.data != null)\n        {\n            return;\n        }\n        G_HttpHelper.httpGet(\"/app-api/user/grades\", function(ret){\n            console.log(\"[获取VIP配置]：返回数据\",ret)   \n            if(ret.status && ret.code == CODE.SUCCEED){\n                this.vipConfig.data = ret.data;\n                console.log(\"ret.data   \"+ret.data);\n            }\n            G_OnFire.fire(EventRequest.VipUpdate)  \n        }.bind(this))\n    }\n\n    /**\n     * 领取晋级赠金\n     */\n    requesVipPromotion(call){\n        console.log(\"领取晋级赠金1\")   \n        if(this.vipConfig.data == null)\n        {\n            return;\n        }\n        console.log(\"领取晋级赠金2\")   \n        G_HttpHelper.httpPost(\"/app-api/user/promotion-gifts\",null, function(ret){\n            console.log(\"[领取晋级赠金]：返回数据\",ret)   \n            if(ret.status && ret.code == CODE.SUCCEED){\n                G_UserControl.getUser().vippromotion = 0;\n                console.log(\"ret.data   \"+ret.data);\n            }\n           // G_OnFire.fire(EventRequest.VipUpdate)  \n            if(call)\n            {\n                call(ret)\n            }\n        }.bind(this))\n    }\n    /**\n     * 领取每周赠金\n     */\n    requesVipWeekLy(call){\n        console.log(\"领取每周赠金1\")   \n        if(this.vipConfig.data == null)\n        {\n            return;\n        }\n        console.log(\"领取每周赠金2\")   \n        G_HttpHelper.httpPost(\"/app-api/user/weekly-gifts\",null, function(ret){\n            console.log(\"[领取每周赠金]：返回数据\",ret)   \n            if(ret.status && ret.code == CODE.SUCCEED){\n                G_UserControl.getUser().vipweekly = 0;\n                console.log(\"ret.data   \"+ret.data);\n            }\n           // G_OnFire.fire(EventRequest.VipUpdate)  \n            if(call)\n            {\n                call(ret)\n            }\n        }.bind(this))\n    }\n\n\n\n}\n\n\n\nexport const G_VipControl = VipControl.Instance;\n"]}