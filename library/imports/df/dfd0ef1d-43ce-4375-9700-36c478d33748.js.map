{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\Hall\\Promote/assets\\Script\\Hall\\Promote\\WashRewardPanel.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Hall\\Promote","sourcesContent":["import { G_Language } from '../../Language/Language';\r\nimport List from '../../Common/List';\r\nimport { G_Utils } from '../../Tool/Utils';\r\nimport { G_PayControl } from '../../Controller/PayControl';\r\nimport { G_PromoteControl } from '../../Controller/PromoteControl';\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class WashRewardPanel extends cc.Component {\r\n\r\n\r\n    @property(List)\r\n    list : List = null;\r\n    // @property(cc.Node)\r\n    // typeList : cc.Node = null;\r\n    // @property(cc.Node)\r\n    // btnChaXun : cc.Node = null;\r\n    @property(cc.Node)\r\n    bottomLbParent:cc.Node = null;\r\n\r\n    //private _typeMenu = null;\r\n    //private _updateQueryFlag = false;\r\n\r\n    private curList = null;\r\n    private curBeginTimeDate = null;\r\n    private curEndTimeDate = null;\r\n\r\n    private dateType = 1;\r\n\r\n    onLoad () {\r\n        // this.btnChaXun.on(cc.Node.EventType.TOUCH_END, this.onChaXun.bind(this));\r\n        // //this.list.numItems = 2;\r\n        // if(this.typeList){\r\n        //     this._typeMenu = this.typeList.getComponent(\"MyPulldownMenu\")\r\n        //     this._typeMenu.menuData =  G_PromoteControl.getConfig().getCurUnderLabelStr(-1);\r\n        //     var _length = G_PromoteControl.getConfig().getCurUnderLabelStr(-1).length;\r\n        //     if(_length >=8)\r\n        //     {\r\n        //         this._typeMenu.list.node.height = 37 * 8;\r\n        //     }else\r\n        //     {\r\n        //         this._typeMenu.list.node.height = _length > 0 ? (37*_length):37;\r\n        //     }\r\n        //     var selectedId = this._typeMenu.selectResult.selectedId;\r\n        //     var selectedText = this._typeMenu.selectResult.text;\r\n        //     console.log(\"选择了什么》》\",selectedId,selectedText)\r\n        // }\r\n\r\n    }\r\n\r\n    onEnable()\r\n    {\r\n        G_PromoteControl.requesWashRewardMsg(function(ret){         \r\n           // this.showInfo();\r\n        }.bind(this));\r\n        this.showInfo();\r\n    }\r\n\r\n    /**\r\n    onChaXun(){\r\n        this._updateQueryFlag = true;\r\n        this.list.content.removeAllChildren();\r\n        console.log(\"this._typeMenu.selectResult.selectedId   \",this._typeMenu.selectResult.selectedId);\r\n        \r\n        var _type = G_PromoteControl.getConfig().underLabelConfig[this._typeMenu.selectResult.selectedId].index;\r\n        this.curList = G_PromoteControl.getConfig().getWashRewardListInfo(_type,this.curBeginTimeDate,this.curEndTimeDate);\r\n        this.list.numItems = this.curList.length;\r\n        let _score = 0;\r\n        let _scoreColor = \"\";\r\n        let _reward = 0;\r\n        let _rewardColor = \"\";\r\n        this.curList.forEach(element => {\r\n            _score = _score + element.score;\r\n            _reward = _reward + element.reward;\r\n        });\r\n        this.bottomLbParent.getChildByName(\"label_1\").getComponent(cc.Label).string = this.curList.length+G_Language.get(\"underNumRecord\");\r\n        if(_score < 0)  //减少\r\n        {\r\n            _scoreColor = \"37CC6E\"\r\n        }else\r\n        {\r\n            _scoreColor = \"DF0F39\"\r\n        }\r\n        if(_reward < 0)  //减少\r\n        {\r\n            _rewardColor = \"37CC6E\"\r\n        }else\r\n        {\r\n            _rewardColor = \"DF0F39\"\r\n        }\r\n        this.bottomLbParent.getChildByName(\"label_2\").getComponent(cc.RichText).string = \"<color =#\" +_scoreColor +\">\"+_score.toFixed(2) +\"</color>\"\r\n        this.bottomLbParent.getChildByName(\"label_3\").getComponent(cc.RichText).string = \"<color =#\" +_rewardColor +\">\"+_reward.toFixed(2) +\"</color>\"\r\n    } */\r\n\r\n    showInfo(){\r\n        this.getTimeDate();   \r\n      //  this.onChaXun();  \r\n    }\r\n\r\n    onToggleClick(event){\r\n        console.log(\"event.name:\",event.target._localZOrder)\r\n        this.dateType =  event.target._localZOrder;    //1.全部 2.昨日 3.今日 4.上周 5.上月\r\n        this.getTimeDate();        \r\n    }\r\n\r\n    getTimeDate()\r\n    {\r\n        G_Utils.getTimeDate(this.dateType,function(begin,end){\r\n            this.curBeginTimeDate = begin;\r\n            this.curEndTimeDate = end;\r\n            this.curList = G_PromoteControl.getConfig().getWashRewardListInfo(this.curBeginTimeDate,this.curEndTimeDate);\r\n            this.list.numItems = this.curList.length;\r\n            if(this.curList.length >0)\r\n            {\r\n                let _bet = 0;\r\n                let _money = 0;\r\n                this.curList.forEach(element => {\r\n                    _bet = _bet + element.bet;\r\n                    _money = _money + element.money;\r\n                });\r\n                this.bottomLbParent.getChildByName(\"label_1\").getComponent(cc.RichText).string = \"<color =#DF0F39>\"+_bet.toFixed(2) +\"</color>\"\r\n                this.bottomLbParent.getChildByName(\"label_3\").getComponent(cc.RichText).string = \"<color =#DF0F39>\"+_money.toFixed(2) +\"</color>\"\r\n            }else\r\n            {\r\n                this.bottomLbParent.getChildByName(\"label_1\").getComponent(cc.RichText).string = \"\"\r\n                this.bottomLbParent.getChildByName(\"label_3\").getComponent(cc.RichText).string = \"\"\r\n            }\r\n        }.bind(this));\r\n    }\r\n\r\n\r\n    onListRender(item: cc.Node, idx: number) {\r\n        //console.log(\"item   \",this.curList.length);\r\n        //console.log(\"idx   \",idx);\r\n        item.getChildByName(\"sprDiSe\").active = idx % 2 == 0;\r\n        if(this.curList.length > idx)\r\n        {\r\n            let cur = this.curList[idx]\r\n            item.getChildByName(\"label_0\").getComponent(cc.RichText).string = cur.name.toString();\r\n            item.getChildByName(\"label_1\").getComponent(cc.RichText).string = \"<color =#DF0F39>\"+cur.bet.toFixed(2) +\"</color>\"\r\n            item.getChildByName(\"label_2\").getComponent(cc.RichText).string = Math.floor(cur.pro*100) +\"%\"\r\n            item.getChildByName(\"label_3\").getComponent(cc.RichText).string = \"<color =#DF0F39>\"+cur.money.toFixed(2) +\"</color>\"\r\n            item.getChildByName(\"label_4\").getComponent(cc.RichText).string = cur.created_at\r\n        }\r\n    }\r\n\r\n    onRequestData(item: cc.Node, idx: number){\r\n        // if (this.list.length >= 99){\r\n        //     return;\r\n        // }\r\n        // if(this._updateQueryFlag){\r\n        //     this._updateQueryFlag = false;\r\n        //     return;\r\n        // }\r\n        // this.list.numItems += 10\r\n    }\r\n\r\n}\r\n"]}