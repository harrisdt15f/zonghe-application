{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Script\\Hall/assets\\Script\\Hall\\HallTopNode.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\Hall","sourcesContent":["\nimport {uiEventModules, EventRequest} from \"../Config/uiEvent\"\nimport {G_UiForms} from \"../Tool/UiForms\"\nimport { G_UserControl } from \"../Controller/UserControl\";\nimport { G_Utils } from '../Tool/Utils';\nimport { BOX_TYPE } from \"../Config/IdentifyKey\";\nimport { LoginTab_Type } from '../Config/IdentifyKey';\nimport { G_OnFire } from '../Net/OnFire';\nimport { G_Language } from \"../Language/Language\";\nimport { Platforms } from '../Platform/Platforms';\nimport { URL } from \"../Config/config\";\nimport { G_HttpHelper } from \"../Net/HttpHelper\";\n//import { UserModel } from \"../../../packVersion/ver_1_0.0.0/src/project.dev\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class HallTopNode extends cc.Component {\n\n    @property(cc.Sprite)\n    vip : cc.Sprite = null;\n\n    @property(cc.SpriteAtlas)\n    headAtlas: cc.SpriteAtlas = null;\n    @property(cc.Node)\n    playerInfoObj: cc.Node = null;\n\n    @property(cc.Sprite)\n    head : cc.Sprite = null;\n    @property(cc.Node)\n    headBox:cc.Node = null;\n    @property(cc.Node)\n    lableName : cc.Node = null;\n\n    @property(cc.Node)\n    goldNode: cc.Node = null;\n    @property(cc.Node)\n    goldBtn: cc.Node = null;\n    @property(cc.Node)\n    goldLabel: cc.Node = null; \n\n    @property(cc.Node)\n    lableId : cc.Node = null;\n\n    @property(cc.Node)\n    labelCopy : cc.Node = null;\n\n\n    //未登录状态\n    @property(cc.Node)\n    playerEmptyObj: cc.Node = null;\n\n    @property(cc.Node)\n    loginBtn: cc.Node = null;   //登录\n    @property(cc.Node)      \n    registerBtn: cc.Node = null;  //注册\n    @property(cc.Node)\n    serverBtn: cc.Node = null;   //客服\n    @property(cc.Node)      \n    supportBtn: cc.Node = null;  //帮助    \n\n    private platforms : Platforms = null;\n\n    onLoad () {\n        this.platforms = new Platforms()\n    }\n\n    start () {\n\n        G_Utils.onClickEnd(this.goldBtn, this.onShop, this)\n        \n        let www = this.node.getChildByName(\"www\");\n        let copyBtn = www.getChildByName(\"copyBtn\");\n\n        G_Utils.onClickEnd(copyBtn, this.onCopy, this)   //复制\n        G_Utils.onClickEnd(this.headBox, this.onHead, this)  //头像选择\n        G_Utils.onClickEnd(this.loginBtn,this.onLoginNode,this) //登录\n        G_Utils.onClickEnd(this.registerBtn,this.onResigterNode,this) //注册\n        G_Utils.onClickEnd(this.serverBtn,this.onCustomServer,this) //客服\n        G_Utils.onClickEnd(this.supportBtn,this.onHelp,this) //帮助\n\n        G_OnFire.on(EventRequest.HeadUpdata, this.fireUpdateView.bind(this))\n        \n    }\n\n    // update (dt) {}\n\n    onEnable(){\n        //this.fireUpdateView()\n    }\n\n    onDestroy(){\n        G_OnFire.off(EventRequest.HeadUpdata, this.fireUpdateView.bind(this))\n    }\n\n    setHead(){\n\n    }\n\n    setVIP(type){\n        this.vip.spriteFrame = this.headAtlas.getSpriteFrame(\"vip\" + type);\n    }\n\n    onLoginNode()\n    {\n        let _nodeName = uiEventModules.landingNode;\n        G_UiForms.show(_nodeName)\n        G_UiForms.setSelectPanelShow(LoginTab_Type.login);\n    }\n\n    onResigterNode()\n    {\n        let _nodeName = uiEventModules.landingNode;\n        G_UiForms.show(_nodeName)\n        G_UiForms.setSelectPanelShow(LoginTab_Type.register);\n    }\n\n    onShop(){\n        let flag = G_UserControl.isLogin()\n        let formsName = !flag ? uiEventModules.landingNode : uiEventModules.shopNode\n        if(!flag)\n            G_UiForms.hint(G_Language.get(\"PleaseLogInFirst\"))\n\n        G_UiForms.show(formsName);\n    }\n\n    onCustomServer(){\n        let _nodeName = uiEventModules.serviceNode;\n        G_UiForms.show(_nodeName)\n        console.log('_nodeName  '+_nodeName)\n       // G_UiForms.setSelectPanelShow();\n    }\n\n    onHelp(){\n\n    }\n\n\n    onCopy(){\n        var str = this.labelCopy.getComponent(cc.Label).string;\n        this.platforms.JsCopy(str)\n        G_UiForms.hint(G_Language.get(\"copySucceed\"))\n    }\n\n    onHead(func){\n        let flag = G_UserControl.isLogin()\n        let formsName = !flag ? uiEventModules.landingNode : uiEventModules.headSetNode\n        let formasType = !flag ? BOX_TYPE.BOX_NONE : BOX_TYPE.BOX_SMALL\n        if(!flag)\n            G_UiForms.hint(G_Language.get(\"PleaseLogInFirst\"))\n    \n        G_UiForms.show(formsName, formasType);    \n    }\n\n    onReplaceHead(remoteUrl){     \n\n      // remoteUrl = \"http://cdn.kuokuo666.com/KUOKUO.png\";\n     //remoteUrl = \"http://pic.jianghu.local/uploads/test/avatar/2020-01-08/7c0a218b4f651a9c6aeded81fc032ef6.png\";\n      //remoteUrl = \"https://www.nationalgeographic.com/content/dam/travel/commercial/2019/international/philippinesdepartmentoftourism/article1-know-before-you-go/steep-karst-cliffs-of-el-nido-in-palawan.adapt.1900.1.jpg\";\n     // remoteUrl = \"data:image/jpeg;base64,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\";\n      console.log(\"remoteUrl   \"+remoteUrl); \n      /*\n      this.CacheNetImg(remoteUrl,function(spriteFrame){\n          this.head.spriteFrame = spriteFrame;  \n\n      }.bind(this));\n      */\n\n      /*\n       cc.loader.load({url:remoteUrl,type:\"png\"},function(err,img){\n            if(err)\n            {\n                console.log(\"图片下载失败\",remoteUrl,err);\n                return;\n            }\n            //var mylogo  = new cc.SpriteFrame(img); \n            //this.head.spriteFrame = mylogo;\n        }.bind(this));\n        */\n       \n       // this.head.getComponent(cc.Sprite).spriteFrame = this.headAtlas.getSpriteFrame(\"touxiang\"); \n\n       /*\n        let xhr = cc.loader.getXMLHttpRequest();\n        xhr.onreadystatechange = function () {\n            console.log(\"data  \"+xhr.responseText);\n            if (xhr.readyState === 4 && xhr.status == 200) {\n                //let data = this.doDecode(xhr.responseText);\n                    \n            } \n            else if (xhr.readyState === 4 && xhr.status == 401) {\n                \n            } \n        }.bind(this);\n        \n        xhr.open('GET', remoteUrl, true);\n        xhr.setRequestHeader('Access-Control-Allow-Origin', '*');\n        xhr.setRequestHeader('Access-Control-Allow-Headers', 'Content-Type');\n        xhr.setRequestHeader('Access-Control-Allow-Methods', 'GET');\n        xhr.setRequestHeader('Access-Control-Allow-Credentials','true')\n        //xhr.setRequestHeader('Access-Control-Allow-Methods', 'PUT,GET');\n        //xhr.setRequestHeader('Access-Control-Allow-Headers', 'x-requested-with,content-type');\n        // xhr.setRequestHeader(\"Content-Type\", \"application/json;charset=utf-8\");\n        xhr.setRequestHeader(\"Content-Type\", \"application/json\");\n        xhr.setRequestHeader('Authorization', 'Bearer '+G_UserControl.getUser().accessToken);\n        console.log(\"xhr  \"+xhr.status)\n        xhr.timeout = 5000;\n        xhr.send();\n        */\n    }\n\n    fireUpdateView(){\n        let flag = G_UserControl.isLogin()\n        if(flag)\n        {\n            this.playerInfoObj.active = true;\n            this.goldNode.active = true; \n            this.playerEmptyObj.active = false;\n            this.lableName.getComponent(cc.Label).string = G_UserControl.getUser().userName;\n            this.lableId.getComponent(cc.Label).string = \"ID:\"+G_UserControl.getUser().uid;\n            this.setVIP(G_UserControl.getUser().level);\n\n            let pic = G_UserControl.getUser().usePic;\n            console.log(\"pic  \",pic);\n            \n            let index = parseInt(pic)\n            if(!isNaN(index) && index >0)\n            {\n                this.head.getComponent(cc.Sprite).spriteFrame = this.headAtlas.getSpriteFrame(\"touxiang\" + index);\n            }else\n            {\n                this.head.getComponent(cc.Sprite).spriteFrame =this.headAtlas.getSpriteFrame(\"touxiang1\");\n            }\n          // this.onReplaceHead(pic)\n           /*\n           this.loadNative(pic,(o)=>{\n            this.head.spriteFrame = o;\n           });\n           */\n            /*\n            this.CacheNetImg(pic,function(newSprite){\n                console.log(\"newSprite\" +newSprite);\n                this.head.getComponent(cc.Sprite).spriteFrame = newSprite;\n            }.bind(this));\n            */\n           // console.log(' G_UserControl.getUser().balance  '+ G_UserControl.getUser().balance);\n            if(G_UserControl.getUser().balance)\n            {\n                this.goldLabel.getComponent(cc.Label).string = \"\"+Math.round(G_UserControl.getUser().balance*100)/100;\n            }\n        }\n        else\n        {\n            this.playerInfoObj.active = false;\n            this.goldNode.active = false;\n            this.playerEmptyObj.active = true;\n\n        }\n    }\n\n    SaveToLocal(){\n \n        let fileName=\"textureName\";\n        let fileType=\".png\";\n        let filePath:string=null;\n        let xhr=new XMLHttpRequest();\n        xhr.onreadystatechange=()=>{\n            if(xhr.readyState===4 && xhr.status ===200){\n                if(xhr.response&&cc.sys.isNative){\n                    let rootPath=jsb.fileUtils.getWritablePath();\n                   // filePath = rootPath + fileName +fileType;\n                   // let u8a=new Uint8Array(xhr.response);\n                   // jsb.fileUtils.writeDataToFile(u8a,filePath);\n                    //JS调用JAVA saveTextureToLocal 方法 参数为 filePath 也就是路径\n                   // jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"saveTextureToLocal\", \"(Ljava/lang/String;)V\", filePath);\n\n                }\n            }\n \n        },\n        xhr.responseType='arraybuffer';\n        xhr.open(\"GET\",\"http://pic.jianghu.local/uploads/jhhy/avatar/2020-02-25/7c0a218b4f651a9c6aeded81fc032ef6.png\",true);\n        xhr.send();\n    }\n\n    /*\n    CacheNetImg(Url,callback){\n       // Url = \"http://cdn.kuokuo666.com/KUOKUO.png\";\n        let xhr = cc.loader.getXMLHttpRequest();\n        xhr.onreadystatechange = function () {\n            if (xhr.readyState === 4 && xhr.status == 200) {\n                var tt = xhr.responseText;\n                console.log(\"tt+ \"+tt)\n                var response = JSON.parse(tt);\n         \n                var img = new Image();\n                \n                img.src = response.data;\n                \n                var texture = new cc.Texture2D();\n                texture.genMipmaps = false;\n                \n                texture.initWithElement(img);\n                \n                texture.handleLoadedTexture();\n                \n                var newframe = new cc.SpriteFrame(texture);\n                \n                callback(newframe);\n            } \n            else if (xhr.readyState === 4 && xhr.status == 401) {\n              //  callback({status:401});\n            } \n        };\n\n        console.log(\"[HTTP>GET]:URL>>>>>>>>>>>>>>>>>\",Url)\n        \n        xhr.open('GET', Url, true);\n \n        // if (cc.sys.isNative) {\n        xhr.setRequestHeader(\"Content-Type\", \"application/json\");\n        xhr.setRequestHeader('X-Requested-With','XMLHttpRequest');\n        //xhr.setRequestHeader('JHReferer', DNS);\n        xhr.setRequestHeader('Authorization', 'Bearer '+G_UserControl.getUser().accessToken);\n\n        // xhr.setRequestHeader('Authorization', 'Bearer ' + \"\");\n        // }\n        // note: In Internet Explorer, the timeout property may be set only after calling the open()\n        // method and before calling the send() method.\n        xhr.timeout = 5000;\n        xhr.send();\n        \n     }\n    */\n\n\n}\n"]}