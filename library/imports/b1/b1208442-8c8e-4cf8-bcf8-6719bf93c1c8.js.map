{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\Hall\\Subitem/assets\\Script\\Hall\\Subitem\\myToggleSelected.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Hall\\Subitem","sourcesContent":["import { G_Utils } from '../../Tool/Utils';\n\nconst {ccclass, property, executionOrder} = cc._decorator;\n\ninterface  itemNode{\n    selecledId : number;\n    isChecked : boolean;\n}\n\n@ccclass\n@executionOrder(-6000)\nexport default class myToggleSelected extends cc.Component {\n    @property(cc.Node)\n    content:cc.Node = null;\n\n    @property({\n        tooltip:\"选中此选项，在选择后下次点击还可以响应，状态不变\"\n    })\n    allowSwitchOff : boolean = false;\n\n    @property({\n        type: cc.Component.EventHandler,\n        tooltip: CC_DEV && '点击事件',\n    })\n    private clickEndEvent: cc.Component.EventHandler = new cc.Component.EventHandler();\n\n    private currNode : cc.Node = null;\n    private lastSelected : cc.Node = null;\n\n    onLoad () {\n        this.currNode = this.content || this.node;\n        this.currNode.children.forEach((item, index)=>{\n            if(index == 0)\n                this.lastSelected = item\n\n            var itemAs = item as unknown as itemNode\n            itemAs.selecledId = index\n            itemAs.isChecked = index == 0;\n            this.singleItem(item, index == 0)\n            G_Utils.onClickEnd(item, this.onToggleEnd, this)\n        }, this)\n    }\n\n    start () {\n    }\n    \n    // update (dt) {}\n\n    onEnable(){\n    }\n\n    onToggleEnd(item){\n        this.select = item.target\n    }\n\n    /**\n     * 选项显隐控制\n     * @param item 当前的选择\n     * @param flag 显隐\n     */\n    singleItem(item : any, flag : boolean){\n        item.isChecked = flag;\n        item.getChildByName(\"select\").active = flag\n        item.getChildByName(\"BgText\").active = !flag\n        item.getChildByName(\"checkmarkText\").active = flag\n    }\n\n    /**\n     * 控制选择某一项\n     * @param key  下标（有序）\n     */\n    set selectSingle(key : any){\n        this.select =  this.currNode.children[key];\n    }\n\n    get selectSingle(){\n        return this.lastSelected\n    }\n\n    set select(item : any){\n        if(!this.allowSwitchOff && item.isChecked)\n            return;\n        if(this.lastSelected) \n            this.singleItem(this.lastSelected, false)\n\n        this.lastSelected = item\n        this.singleItem(item, true)\n        if(this.clickEndEvent)\n            cc.Component.EventHandler.emitEvents([this.clickEndEvent], item);\n    }\n    get select(){\n        return this.lastSelected\n    }\n}\n"]}