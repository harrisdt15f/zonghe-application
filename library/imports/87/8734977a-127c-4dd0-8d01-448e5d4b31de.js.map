{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Script\\Net/assets\\Script\\Net\\HttpHelper.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\Net","sourcesContent":["\n\nimport {URL} from \"../Config/config\"\nimport { G_UserControl } from '../Controller/UserControl';\n//import { context } from \"../../../packVersion/ver_1_0.0.0/src/cocos2d-jsb\";\nimport CryptoJS  = require('../Common/CryptoJS')\nimport { JSEncrypt } from \"../Common/jsencrypt\";\n\n\nclass HttpHelper {\n    public static readonly Instance : HttpHelper = new HttpHelper();\n    /**\n     * get请求\n     * @param {string} url \n     * @param {function} callback \n     */\n    httpGet(url, callback) {\n        // cc.myGame.gameUi.onShowLockScreen();\n        let xhr = cc.loader.getXMLHttpRequest();\n        xhr.onreadystatechange = function () {\n            if (xhr.readyState === 4 && xhr.status == 200) {\n                let respone = xhr.responseText;\n                let rsp = JSON.parse(respone);\n                callback(rsp);\n            } \n            else if (xhr.readyState === 4 && xhr.status == 401) {\n                callback({status:401});\n            } \n        };\n\n        let data = this.doEncode(url);\n        // xhr.withCredentials = true;\n        console.log(\"[HTTP>GET]:URL>>>>>>>>>>>>>>>>>\",URL+url)\n        \n        xhr.open('GET', URL + url, true);\n \n        // if (cc.sys.isNative) {\n        xhr.setRequestHeader('Access-Control-Allow-Origin', '*');\n        xhr.setRequestHeader('Access-Control-Allow-Headers', 'Content-Type');\n        xhr.setRequestHeader('Access-Control-Allow-Methods', 'GET,POST,PUT,OPTIONS');\n        xhr.setRequestHeader('Access-Control-Allow-Credentials','true')\n        //xhr.setRequestHeader('Access-Control-Allow-Methods', 'PUT,GET');\n        //xhr.setRequestHeader('Access-Control-Allow-Headers', 'x-requested-with,content-type');\n        // xhr.setRequestHeader(\"Content-Type\", \"application/json;charset=utf-8\");\n        xhr.setRequestHeader(\"Content-Type\", \"application/json\");\n        xhr.setRequestHeader('Authorization', 'Bearer '+G_UserControl.getUser().accessToken);\n\n        // xhr.setRequestHeader('Authorization', 'Bearer ' + \"\");\n        // }\n        // note: In Internet Explorer, the timeout property may be set only after calling the open()\n        // method and before calling the send() method.\n        console.log(\"xhr  \"+xhr.status)\n        xhr.timeout = 5000;\n        xhr.send();\n    }\n\n    /**\n     * post请求\n     * @param {string} url \n     * @param {object} params \n     * @param {function} callback \n     */\n    httpPost(url, params, callback) {\n        let xhr = cc.loader.getXMLHttpRequest();\n        xhr.onreadystatechange = function () {\n            if (xhr.readyState === 4 && xhr.status == 200) {\n                let respone = xhr.responseText;\n                let rsp = JSON.parse(respone);\n                callback(rsp);\n            }else if(xhr.readyState === 3 &&  xhr.status != 200) {\n                let respone = xhr.responseText;\n                var rsp = JSON.parse(respone);\n                callback(rsp);\n            }\n            console.log('respone  '+xhr.status);\n        };\n        console.log(\"[HTTP>POST]:URL>>>>>>>>>>>>>>>>>\",URL+url,\" params \"+JSON.stringify(params) )\n        xhr.open('POST', URL+url, true);\n        // if (cc.sys.isNative) {\n        xhr.setRequestHeader('Access-Control-Allow-Origin', '*');\n        xhr.setRequestHeader('Access-Control-Allow-Methods', 'GET, POST');\n        xhr.setRequestHeader('Access-Control-Allow-Headers', 'x-requested-with,content-type');\n        xhr.setRequestHeader(\"Content-Type\", \"application/json\");\n         xhr.setRequestHeader('Authorization', 'Bearer ' + G_UserControl.getUser().accessToken);\n        // }\n        // note: In Internet Explorer, the timeout property may be set only after calling the open()\n        // method and before calling the send() method.\n        xhr.timeout = 5000;// 8 seconds for timeout\n\n        //xhr.send(JSON.stringify(params));\n        if(params == null)\n        {\n            xhr.send();\n        }else\n        {\n            let data = {\"data\":this.doEncode(params)};\n            xhr.send(JSON.stringify(data));\n        }\n        \n    }\n\n        /**\n     * put请求\n     * @param {string} url \n     * @param {object} params \n     * @param {function} callback \n     */\n    httpPut(url, params, callback) {\n        let xhr = cc.loader.getXMLHttpRequest();\n        xhr.onreadystatechange = function () {\n            if (xhr.readyState === 4 && xhr.status == 200) {\n                let respone = xhr.responseText;\n                let rsp = JSON.parse(respone);\n                callback(rsp);\n            }else if(xhr.readyState === 3 &&  xhr.status != 200) {\n                let respone = xhr.responseText;\n                var rsp = JSON.parse(respone);\n                callback(rsp);\n            }\n            console.log('respone  '+xhr.status);\n        };\n        console.log(\"[HTTP>POST]:URL>>>>>>>>>>>>>>>>>\",URL+url,\" params \"+JSON.stringify(params) )\n        xhr.open('PUT', URL+url, true);\n        // if (cc.sys.isNative) {\n        xhr.setRequestHeader('Access-Control-Allow-Origin', '*');\n        xhr.open('PUT', URL+url, true);\n        xhr.setRequestHeader('Access-Control-Allow-Methods', 'PUT,GET, POST');\n        xhr.setRequestHeader('Access-Control-Allow-Headers', 'x-requested-with,content-type');\n        xhr.setRequestHeader(\"Content-Type\", \"application/json\");\n         xhr.setRequestHeader('Authorization', 'Bearer ' + G_UserControl.getUser().accessToken);\n        // }\n        // note: In Internet Explorer, the timeout property may be set only after calling the open()\n        // method and before calling the send() method.\n        xhr.timeout = 5000;// 8 seconds for timeout\n\n        //xhr.send(JSON.stringify(params));\n        if(params == null)\n        {\n            xhr.send();\n        }else\n        {\n            let data = {\"data\":this.doEncode(params)};\n            xhr.send(JSON.stringify(data));\n        }\n        \n    }\n\n    \n    doEncode(data)\n    {   \n        // //偏移量 由前端每次请求随机生成 16位\n        var IV = this.randomString(16);\n        // //AES加密KEY 由前端自己每次请求随机生成\n        var KEY = this.randomString(16);\n        \n        var public_key = \"-----BEGIN PUBLIC KEY-----MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCgy6JOupuDqE9itVQvGSBDJotBEJFASuklIwvcMNtXUH99PdihJ+TJN2AjNphzCdgL9KlguDG+u4C719DZOC3YrGn7Ps9vWOFtQYLzh69cGd+nlqOR4LKVSAYRn2NtrV9elAzBjie/Y7ITMsU9+ZTsccRqb+qd+OlBsYdg9dhvVQIDAQAB-----END PUBLIC KEY-----\";\n        \n        \n        //加密后的数据 json 直接传递给后端\n        var encrypt_data = this.AES_encrypt(data,KEY,IV,public_key);\n        console.log('jiam  '+encrypt_data);\n      //  var jiem  = this.doDecode(encrypt_data,KEY,IV);\n      //  console.log('jiem   '+jiem);\n        return encrypt_data;\n    }\n\n    \n    \n    //随机串\n    randomString(len) {\n    　　len = len || 32;\n    　　var $chars = 'ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678'; //默认去掉了容易混淆的字符oOLl,9gq,Vv,Uu,I1\n    　　var maxPos = $chars.length;\n    　　var pwd = '';\n    　　for (var i = 0; i < len; i++) {\n    　　　　pwd += $chars.charAt(Math.floor(Math.random() * maxPos));\n    　　}\n    　　return pwd;\n    }\n    \n    /**\n     * AES加密数组 传入参数为需要传递的数组JSON\n     */\n    AES_encrypt(data,KEY,IV,pkcs8_public) {              \n        var key_utf8 = CryptoJS.enc.Utf8.parse(KEY);// 秘钥\n        var iv_utf8= CryptoJS.enc.Utf8.parse(IV);//向量iv\n          let srcs = ''\n          switch (typeof (data)) {\n            case 'string':\n              srcs = CryptoJS.enc.Utf8.parse(data)\n              break;\n            case 'object':\n              srcs = CryptoJS.enc.Utf8.parse(JSON.stringify(data))\n              break;\n            default:\n              srcs = CryptoJS.enc.Utf8.parse(data.toString())\n          }\n        //AES 加密\n        var encrypted = CryptoJS.AES.encrypt(srcs, key_utf8, { iv: iv_utf8, mode: CryptoJS.mode.CBC, padding: CryptoJS.pad.Pkcs7}).toString();\n        //RSA 加密 组包\n        return this.pack(encrypted,IV,KEY,pkcs8_public)\n    }\n   //组包\n    pack(encrypted,iv,key,pub_key) {\n        var jsencrypt = new JSEncrypt();\n        jsencrypt.setKey(pub_key);\n        var rsa_iv =  jsencrypt.encrypt(iv);\n        var rsa_key = jsencrypt.encrypt(key);\n        var splitFlag = 'aesrsastart';\n        var res_data = encrypted+splitFlag+rsa_iv+splitFlag+rsa_key\n        return res_data\n    }\n\n    doDecode(data,key_utf8,iv_utf8)\n    {\n       // var key_utf8 = CryptoJS.enc.Utf8.parse(KEY);// 秘钥\n        //var iv_utf8= CryptoJS.enc.Utf8.parse(IV);//向量iv\n        let encryptedHexStr = CryptoJS.enc.Hex.parse(data);\n        let srcs = CryptoJS.enc.Base64.stringify(encryptedHexStr);\n        let decrypt = CryptoJS.AES.decrypt(srcs,key_utf8,{iv: iv_utf8, mode: CryptoJS.mode.CBC, padding: CryptoJS.pad.Pkcs7}).toString();\n        let decryptedStr = decrypt.toString(CryptoJS.enc.Utf8);\n        return decryptedStr.toString();\n    }\n}\n\nexport const G_HttpHelper = HttpHelper.Instance;\n"]}