{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\Hall\\ShowBoxUI/assets\\Script\\Hall\\ShowBoxUI\\ShowBox.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Hall\\ShowBoxUI","sourcesContent":["\nimport  {G_OnFire}  from \"../../Net/OnFire\";\n\nimport {uiEventModules, uiEventFunction} from \"../../Config/uiEvent\"\nimport { G_Utils } from '../../Tool/Utils';\nimport { BOX_TYPE } from \"../../Config/IdentifyKey\";\n\n\nconst {ccclass, property} = cc._decorator;\n\nlet boxTypeEnum = cc.Enum(BOX_TYPE);\n\n@ccclass\nexport default class ShowBox extends cc.Component {\n\n    @property(cc.Node)\n    box:cc.Node = null;\n\n    @property(cc.Node)\n    peanl:cc.Node = null;\n\n    @property({\n        type:cc.Enum(boxTypeEnum),\n        tooltip:\"窗体类型：BOX_NONE 默认窗体, BOX_SMALL 小窗体, BOX_COM 通用窗体\"\n    })\n    boxType = boxTypeEnum.BOX_NONE;\n\n    @property(cc.SpriteAtlas)\n    titleTextAtlas : cc.SpriteAtlas = null;\n\n    @property(cc.SpriteAtlas)\n    headAtals : cc.SpriteAtlas = null;\n\n    @property({\n        type:cc.Sprite,\n        tooltip:\"蓝色底图\"\n    })\n    buleBg : cc.Sprite = null;\n\n    @property({\n        type:cc.Node,\n        tooltip:\"通用二级界面\"\n    })\n    comBox : cc.Node = null;\n    \n    @property({\n        type : cc.Sprite,\n        tooltip:\"灰色底图\"\n    })\n    creamColouredBg : cc.Sprite = null;\n\n    @property(cc.Sprite)\n    SprTitle : cc.Sprite = null;\n    @property(cc.Node)\n    luImage : cc.Node = null;\n\n    @property({\n        type : cc.Sprite,\n        tooltip : \"标题名称\"\n    })\n    sprTitleName : cc.Sprite = null;\n\n    @property({\n        type : cc.Node,\n        tooltip : \"关闭按钮\"\n    })\n    btnColse : cc.Node = null;\n\n    @property({\n        type:cc.Prefab,\n        tooltip:\"功能模块\"\n    })\n    modulesUI  = []\n\n\n    //属性\n    // peanl = null;\n    tempNode = null;\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        this.peanl.removeAllChildren()\n        G_Utils.onClickEnd(this.btnColse, this.onColse, this)\n        G_OnFire.on(uiEventFunction.colseBox,this.onColse.bind(this));\n    }\n\n    start () {\n\n    }\n    // update (dt) {}\n\n    onEnable(){\n    }\n\n    onColse(){\n        this.peanl.removeAllChildren()\n        G_OnFire.fire(uiEventFunction.secondaryInterface);\n        this.node.active = false;\n    }\n\n    onDestroy(){\n        this.btnColse.off(cc.Node.EventType.TOUCH_END, this.onColse.bind(this));\n        G_OnFire.off(uiEventFunction.colseBox,this.onColse.bind(this));\n    }\n\n    show(_event : string,style? : number){\n        this.box.scale = 0.6\n        console.log(\"_event\",_event)\n        this.node.active = true;\n        this.boxType = style || boxTypeEnum.BOX_NONE;\n        let nodeName = _event;\n        let data = this.getPrefabAndKey(nodeName)\n        let prefab = data.prefab\n        let key = data.key\n        this.setBoxStyle(nodeName)\n        if(prefab){\n            this.tempNode = cc.instantiate(prefab)\n            this.tempNode.parent = this.peanl;\n            this.sprTitleName.spriteFrame = this.titleTextAtlas.getSpriteFrame(\"title_\"+key)\n        }\n        console.log(\"<<show UI>>[prefab]:\",this.tempNode.name)\n        var s1 = cc.scaleTo(0.2, 1.2)\n        var s2 = cc.scaleTo(0.2, 1)\n        var seq = cc.sequence(s1,s2)\n        this.box.runAction(seq)\n    }\n\n    setSelectPanelShow(index){\n        let subitem =  this.tempNode.getComponent(\"SubitemControl\")\n        subitem.leftSelectedItem = index\n\n    }\n\n    setBoxStyle(type){\n        //商店，活动\n        var flag = (type === uiEventModules.shopNode || type === uiEventModules.activityNode || this.boxType == boxTypeEnum.BOX_COM) ? false : true;\n        this.luImage.active = flag\n\n        this.buleBg.node.active = true\n        this.SprTitle.node.active = true\n        this.creamColouredBg.node.active = this.boxType != boxTypeEnum.BOX_COM;\n        this.comBox.active = this.boxType == boxTypeEnum.BOX_COM;;\n        switch (this.boxType) {\n            case  boxTypeEnum.BOX_NONE:\n                this.buleBg.node.width = 1120//1080\n                this.SprTitle.node.width = 1230//1200\n                this.creamColouredBg.node.x = 110\n                this.btnColse.x = 580\n                break;\n            case  boxTypeEnum.BOX_SMALL:\n                this.buleBg.node.width = 880\n                this.SprTitle.node.width = 1000\n                this.creamColouredBg.node.x = 0\n                this.luImage.active = false;\n                this.btnColse.x = 465\n                break;\n            case  boxTypeEnum.BOX_COM:\n                this.buleBg.node.active = false\n                this.SprTitle.node.active = false\n                // this.luImage.active = false;\n                break;              \n            default:\n                break;\n        }\n    }\n\n\n    private getPrefabAndKey(prefabName : string){\n        var prefab = null;\n        var key = 0\n        // console.log(\"this.modulesUI.length  \"+this.modulesUI.length)\n        // for(let index = 0; index < this.modulesUI.length; index++){\n        //     const element = this.modulesUI[index];\n        //     if(element){\n        //         console.log(\"------------->name  \"+element.name + \"  index \"+index);\n        //     }\n        // }\n        for (let index = 0; index < this.modulesUI.length; index++) {\n            const element = this.modulesUI[index];\n            if(element){\n                console.log(\"name  \"+element.name + \"  index \"+index + \" prefabName   \" + prefabName);\n                if (prefabName === element.name){\n                    prefab = element;\n                    key = index;\n                    console.log(\"element.name  \"+element.name + \"  index \"+index);\n                    break;\n                }\n            }\n        }\n        return {\"prefab\" : prefab, \"key\" : key};\n    }\n\n}\n"]}